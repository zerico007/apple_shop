(this["webpackJsonpshop-frontend"]=this["webpackJsonpshop-frontend"]||[]).push([[0],{118:function(e,t,r){},119:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),s=r(17),o=r.n(s),c=r(12),i=r(9),l=r.n(i),d=r(14),u=r(4),p=r(3),b=r(37),j=r(59),m=r(60),h=r.n(m),x="https://apple-shop-backend.herokuapp.com",f=r(23);function g(e,t){var r=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem(e))||t})),n=Object(u.a)(r,2),s=n[0],o=n[1];return Object(a.useEffect)((function(){sessionStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,o]}var O=sessionStorage.store?JSON.parse(sessionStorage.store):null,v=O?O.user:{user:{userId:"",username:"",email:"",password:"",role:"",token:"",isLoggedIn:!1,isLoading:!1,error:null}},y=Object(f.b)({name:"user",initialState:v,reducers:{login:function(e){e.user.isLoading=!0,e.user.error=null},loginSuccess:function(e,t){var r=t.payload;e.user.isLoading=!1,e.user.isLoggedIn=!0,e.user.userId=r.userId,e.user.username=r.username,e.user.email=r.email,e.user.password=r.password,e.user.role=r.role,e.user.token=r.token},loginFailure:function(e,t){e.user.isLoading=!1,e.user.error=t.payload},logout:function(e){e.user.isLoggedIn=!1,e.user.userId="",e.user.username="",e.user.email="",e.user.password="",e.user.role="",e.user.token=""},resetUsertoken:function(e,t){var r=t.payload;e.user.token=r}}}),w=y.actions,S=w.login,k=w.loginSuccess,C=w.loginFailure,P=w.logout,R=w.resetUsertoken,N=y.reducer,z=O?O.products:{products:[],loading:!1,error:null},I=Object(f.b)({name:"products",initialState:z,reducers:{getProductsRequest:function(e){e.loading=!0,e.error=null},getProductsSuccess:function(e,t){e.products=t.payload.reverse(),e.loading=!1,e.error=null},getProductsFailure:function(e,t){e.loading=!1,e.error=t.payload}}}),A=I.actions,L=A.getProductsRequest,F=A.getProductsSuccess,_=A.getProductsFailure,q=I.reducer,T=O?O.orders:{orders:[],loading:!1,error:null},U=Object(f.b)({name:"orders",initialState:T,reducers:{getOrdersRequest:function(e){e.loading=!0,e.error=null},getOrdersSuccess:function(e,t){e.orders=t.payload,e.loading=!1,e.error=null},getOrdersFailure:function(e,t){e.error=t.payload,e.loading=!1}}}),E=U.actions,D=E.getOrdersRequest,B=E.getOrdersSuccess,$=E.getOrdersFailure,M=U.reducer,V=O?O.cart:{total:"",items:[],user:"",loading:!1,error:null},W=Object(f.b)({name:"cart",initialState:V,reducers:{getCartRequest:function(e){e.loading=!0,e.error=null},getCartSuccess:function(e,t){var r=t.payload;if(e.loading=!1,r.message)return e.total="",void(e.items=[]);e.total=r.Total,e.items=r.items,e.user=r.user},getCartFailure:function(e,t){var r=t.payload;e.loading=!1,e.error=r}}}),J=W.actions,Y=J.getCartFailure,H=J.getCartRequest,Z=J.getCartSuccess,G={user:N,products:q,orders:M,cart:W.reducer},K=Object(f.a)({reducer:G}),Q=K;K.subscribe((function(){sessionStorage.clear(),sessionStorage.setItem("store",JSON.stringify(K.getState()))}));var X=h.a.create({baseURL:"https://apple-shop-backend.herokuapp.com/api"});X.interceptors.response.use((function(e){var t,r=X.defaults.headers.common.Authorization&&X.defaults.headers.common.Authorization.split(" ")[1];r&&(1e3*Object(b.a)(r).exp<Date.now()?(console.log("token expired"),e.headers["shop-refreshed-access-token"]&&(t=e.headers["shop-refreshed-access-token"],Q.dispatch(R(t)),ee(t),console.info("access token renewed"))):console.info("token still good"));return e}),(function(e){return Promise.reject(e)}));var ee=function(e){X.defaults.headers.common.Authorization="Bearer ".concat(e),console.log("Set bearer token")},te=r(7),re=(r(55),r(5)),ne=r(6);function ae(){var e=Object(re.a)(["\n  height: 1.5rem;\n  width: fit-content;\n  padding: 3px;\n  display: flex;\n  flex-direction: row;\n"]);return ae=function(){return e},e}function se(){var e=Object(re.a)(["\n  width: 320px;\n  height: 170px;\n  display: flex;\n  flex-direction: column;\n  row-gap: 0.7rem;\n  padding: 10px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n  background: linear-gradient(0.25turn, #cbd0d8, #f4f3ea);\n  border: none;\n  border-radius: 4px;\n"]);return se=function(){return e},e}function oe(){var e=Object(re.a)(['\n  height: 2.5em;\n  font-size: 16px;\n  width: 100px;\n  padding: 5px;\n  margin-top: 10px;\n  margin-bottom: 15px;\n  color: #333d51;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  background-color: #ffcc00;\n  transition: all 0.3s;\n  &:hover {\n    background-color: #e5b700;\n    color: #212a31;\n    transform: scale(1.1);\n  }\n  outline: none;\n  cursor: pointer;\n  &:active {\n    transform: translateY(4px);\n  }\n  border-radius: 0.4rem;\n  font-family: "Roboto Condensed", sans-serif;\n  font-weight: 700;\n  border: none;\n']);return oe=function(){return e},e}function ce(){var e=Object(re.a)(['\n  height: 1.5em;\n  width: 250px;\n  border-bottom: 2px solid gray;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  padding: 10px;\n  font-family: "Roboto Condensed", sans-serif;\n  font-size: 16px;\n  border-top: none;\n  border-left: none;\n  border-right: none;\n']);return ce=function(){return e},e}function ie(){var e=Object(re.a)(["\n  top: 150px;\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n  background: white;\n  width: 300px;\n  border: none;\n  border-radius: 0.3rem;\n  padding: 20px;\n"]);return ie=function(){return e},e}var le=ne.a.div(ie()),de=ne.a.input(ce()),ue=ne.a.button(oe()),pe=ne.a.div(se()),be=ne.a.div(ae()),je={position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0};function me(){var e=Object(re.a)(["\n  width: 60px;\n  height: 2rem;\n  background: lightgrey;\n  border-radius: 0.4rem;\n  padding-left: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  cursor: pointer;\n  color: #212a31;\n  border: none;\n  outline: none;\n  background-color: #ffcc00;\n  transition: all 0.3s;\n  outline: none;\n  &:hover {\n    background-color: #e5b700;\n    transform: scale(1.1);\n  }\n"]);return me=function(){return e},e}function he(){var e=Object(re.a)(['\n  display: grid;\n  width: 80%;\n  grid-template-areas:\n    "pic title"\n    "pic price"\n    "pic quantity"\n    "pic remove";\n  padding: 2rem;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  grid-template-columns: 1fr 2fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  border: 1px solid lightgrey;\n  margin-bottom: 1rem;\n  border-radius: 0.4rem;\n  background: white;\n']);return he=function(){return e},e}var xe=ne.a.div(he()),fe=ne.a.select(me()),ge=function(e){var t=e.updateCart,r=e.productId,s=e.image,o=e.title,c=e.price,i=e.quantity,l=e.removeFromCart,d=Object(a.useState)(i),p=Object(u.a)(d,2),b=p[0],j=p[1];return Object(n.jsxs)(xe,{children:[Object(n.jsx)("div",{className:"cart-image",style:{gridArea:"pic",width:"200px"},children:Object(n.jsx)("img",{src:"".concat(x,"/").concat(s),alt:o,loading:"lazy",className:"product-img"})}),Object(n.jsx)("div",{className:"cart-item-title",style:{gridArea:"title"},children:o}),Object(n.jsx)("div",{className:"cart-item-price",style:{gridArea:"price"},children:Object(n.jsxs)("strong",{children:["Price: $",(new Intl.NumberFormat).format(c)]})}),Object(n.jsx)("div",{className:"cart-quantity-btn",style:{gridArea:"quantity"},children:Object(n.jsxs)(fe,{name:"quantity",id:"quantity",defaultValue:b,onChange:function(e){j(e.target.value);var n={product:r,quantity:e.target.value};t(n)},style:{},children:[Object(n.jsx)("option",{value:1,children:"1"}),Object(n.jsx)("option",{value:2,children:"2"}),Object(n.jsx)("option",{value:3,children:"3"}),Object(n.jsx)("option",{value:4,children:"4"}),Object(n.jsx)("option",{value:5,children:"5"})]})}),Object(n.jsx)("div",{className:"remove-from-cart",style:{gridArea:"remove"},children:Object(n.jsx)(ue,{onClick:function(){l({product:r})},children:"Remove"})})]})};function Oe(){var e=Object(re.a)(["\n  position: relative;\n  margin: 10rem auto;\n  width: 80vw;\n  height: auto;\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: white;\n  border: 1px solid lightgrey;\n  border-radius: 0.2rem;\n"]);return Oe=function(){return e},e}var ve=ne.a.div(Oe()),ye=function(e){var t,r=e.cart,a=e.updateCart,s=e.count,o=e.removeFromCart,c=e.placeOrder,i=e.mobile;return Object(n.jsxs)(ve,{children:[Object(n.jsxs)("div",{className:"cart-header",style:{display:"flex",flexDirection:i?"column":"row",justifyContent:"space-between",alignItems:"center",width:"87%",borderBottom:"1px solid lightgrey",marginBottom:"1rem"},children:[Object(n.jsx)("h2",{children:"Shopping Cart"}),Object(n.jsx)("div",{className:"cart-total",children:Object(n.jsxs)("strong",{children:["Subtotal (".concat(s," items): "),"".concat(r.total||"$0.00")]})}),r.items.length>0&&Object(n.jsx)(ue,{onClick:c,children:"Place Order"})]}),null===(t=r.items)||void 0===t?void 0:t.map((function(e,t){return Object(n.jsx)(ge,{image:e.product.productImage,title:e.product.name,price:e.product.price,quantity:e.quantity,productId:e.product._id,updateCart:a,removeFromCart:o},t)})),!r.items&&Object(n.jsx)("div",{className:"empty-cart",style:{textAlign:"center"},children:Object(n.jsx)("h1",{children:"Your Shopping Cart is Empty. Fill it with goodies that you love!"})})]})};var we=function(e){var t=e.productId,r=e.toggle,s=e.display,o=e.deleteProduct,c=e.addToCart,i=e.UpdateProductModal,l=Object(a.useRef)();return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(te.a,{}),Object(n.jsx)("div",{className:"modal modal-".concat(t),style:{top:"0px"},children:Object(n.jsxs)("div",{className:"modal-content",children:["order"===s&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("h3",{className:"order-modal",children:"How many would you like to add?"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r("modal");var n=l.current.value;if("0"===n)return te.b.error("Please enter a quantity",je);console.log(t,n),c({product:t,quantity:n}),e.target.reset()},children:[Object(n.jsx)(de,{type:"number",name:"quantity",defaultValue:"1",ref:l,style:{textAlign:"center"}}),Object(n.jsx)("br",{}),Object(n.jsx)(ue,{type:"submit",style:{width:"130px"},children:"Confirm"})]})]}),"delete"===s&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("h3",{className:"delete-modal",children:"Are you sure you want to delete this product?"}),Object(n.jsx)(ue,{onClick:function(){return o(t)},style:{width:"120px",alignSelf:"center"},children:"Confirm Delete"})]}),"update"===s&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(i,{})}),Object(n.jsx)(ue,{style:{alignSelf:"center"},onClick:function(){return r("modal")},children:"Cancel"})]})})]})},Se=r(64),ke=r.n(Se);var Ce=function(e){var t=e.videoURL,r=e.productId,a=e.showCloseButton,s=e.closeButton,o=e.setMountVideo,c=e.mountVideo,i=e.mobile;return Object(n.jsxs)("div",{className:"video-div video-".concat(r),style:{top:"0px"},children:[Object(n.jsx)(ke.a,{className:"video-player",style:{left:i?"0":"25vw"},url:t,playing:c,controls:!1,width:i?"97vw":"600px",height:"500px",pip:!0,playsinline:!0,stopOnUnmount:!0}),s&&Object(n.jsxs)("button",{className:"close-video",onClick:function(){a(),o(!c)},children:["Close ",Object(n.jsx)("i",{className:"far fa-times-circle"})]})]})};function Pe(){var e=Object(re.a)(["\n  width: auto;\n  height: auto;\n  transition: all 0.5s ease-in-out;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]);return Pe=function(){return e},e}function Re(){var e=Object(re.a)(["\n  position: relative;\n  z-index: 3;\n  display: flex;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    just0fy-content: center;\n  }\n  margin: 20px auto 20px auto;\n  padding: 40px;\n  border: none;\n  border-radius: 0.5rem;\n\n  width: 50vw;\n  height: auto;\n  background: white; ;\n"]);return Re=function(){return e},e}var Ne=ne.a.div(Re()),ze=ne.a.div(Pe());var Ie=function(e){var t=e.img_url,r=e.price,s=e.title,o=e.id,c=e.videoURL,i=e.user,l=e.deleteProduct,d=e.available,p=e.updateProductAvailability,b=e.mobile,j=e.updateProduct,m=e.addToCart,h=Object(a.useState)(!1),x=Object(u.a)(h,2),f=x[0],g=x[1],O=Object(a.useState)(!1),v=Object(u.a)(O,2),y=v[0],w=v[1],S=Object(a.useState)(""),k=Object(u.a)(S,2),C=k[0],P=k[1],R=Object(a.useState)(),N=Object(u.a)(R,2),z=N[0],I=N[1],A=Object(a.useRef)(),L=Object(a.useRef)(),F=function(){setTimeout((function(){return g(!f)}),1500)},_=function(e){(e=document.querySelector(".".concat(e,"-").concat(o))).classList.toggle("on")},q=function(e){e.preventDefault();var t=new FormData;z&&t.append("productImage",z,z.name),L.current.value!==s&&t.append("newName",L.current.value),A.current.value!==r&&t.append("newPrice",A.current.value);_("modal"),P(""),z?j(e,o,t,{headers:{"content-type":"multipart/form-data"}}):j(e,o,t)},T="administrator"===i.role;return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(we,{productId:o,toggle:_,display:C,deleteProduct:l,UpdateProductModal:function(){return Object(n.jsx)(le,{style:{top:"0"},children:Object(n.jsxs)("form",{className:"update-product-form",onSubmit:q,encType:"multipart/form-data",children:[Object(n.jsx)(de,{type:"text",id:"product-title",name:"product-title",ref:L,defaultValue:s}),Object(n.jsx)(de,{type:"number",id:"product-price",name:"product-price",ref:A,defaultValue:r}),Object(n.jsx)(de,{onChange:function(e){return I(e.target.files[0])},type:"file",name:"productImage",id:"productImage"}),Object(n.jsxs)(ue,{style:{width:"160px"},type:"submit",children:[" ","Confirm Update"]})]})})},addToCart:m}),y&&Object(n.jsx)(Ce,{videoURL:c,toggle:_,productId:o,showCloseButton:F,closeButton:f,mountVideo:y,setMountVideo:w,mobile:b}),Object(n.jsxs)(Ne,{children:[Object(n.jsxs)("div",{className:"left-side",style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:b?"center":"flex-start",width:"50%"},children:[Object(n.jsx)(ze,{children:t&&Object(n.jsx)("img",{src:t,alt:s,className:"product-img",loading:"lazy"})}),T&&Object(n.jsx)(ue,{style:{width:"150px",marginLeft:b?"0":"2rem"},onClick:function(){_("modal"),P("update")},children:"Update Product"}),T&&Object(n.jsx)(ue,{style:{width:"150px",marginLeft:b?"0":"2rem"},onClick:function(){return function(){var e="/products/".concat(o,d?"/unavailable":"/available");p(e)}()},children:"Update Availability"})]}),Object(n.jsxs)("div",{className:"right-side",style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"50%"},children:[Object(n.jsx)("div",{className:"product-title",children:Object(n.jsx)("p",{style:{textAlign:"center"},children:Object(n.jsx)("strong",{children:s})})}),Object(n.jsx)("div",{className:"product-price",children:Object(n.jsxs)("strong",{children:["Price: $",(new Intl.NumberFormat).format(r)]})}),Object(n.jsx)(ue,{className:d?"add-to-order-btn":"add-to-order-btn out-of-stock",style:{width:b?"130px":"100px"},onClick:function(){_("modal"),P("order")},disabled:!d,children:d?"Add to cart":"Out of Stock"}),Object(n.jsxs)(ue,{style:{gridArea:"video"},onClick:function(){F(),w(!y)},children:["Video ",Object(n.jsx)("i",{className:"fab fa-youtube"})]}),T&&Object(n.jsx)(ue,{style:{gridArea:"delete"},onClick:function(){_("modal"),P("delete")},children:"Delete"})]})]})]})};function Ae(){var e=Object(re.a)(["\n    width: 75vw;\n    height: 2rem;\n    top: 150px;\n    margin-right: auto;\n    margin-left: auto;\n    margin-top: 20px;\n    margin-bottom: 20px;\n  "]);return Ae=function(){return e},e}var Le=function(e){var t=e.search,r=e.updateSearch,a=ne.a.div(Ae());return Object(n.jsxs)(a,{children:[Object(n.jsx)(de,{style:{width:"100%",height:"2.5rem",border:"solid 3px #212a31",borderRadius:"0.4rem",boxSizing:"border-box",display:"flex",alignItems:"center"},type:"text",name:"search",id:"searchText",placeholder:"Search",value:t,onChange:function(e){return r(e.target.value)},autoFocus:!0}),Object(n.jsx)("i",{style:{float:"right",position:"relative",top:"-38px",right:"15px"},className:"fas fa-search"})]},"searching")};function Fe(){var e=Object(re.a)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  top: 120px;\n  overflow: hidden;\n  width: 100vw;\n  margin-left: auto;\n  margin-right: auto;\n"]);return Fe=function(){return e},e}var _e=ne.a.div(Fe());var qe=function(e){var t=e.products,r=e.user,s=e.deleteProduct,o=e.updateProductAvailability,c=e.mobile,i=e.updateProduct,l=e.addToCart,d=Object(a.useState)(""),p=Object(u.a)(d,2),b=p[0],j=p[1];return Object(n.jsxs)(_e,{children:[Object(n.jsx)(Le,{updateSearch:function(e){j(e)},search:b}),""===b&&t.map((function(e,t){return Object(n.jsx)(Ie,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(x,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,available:e.available,updateProductAvailability:o,updateProduct:i,addToCart:l,user:r,deleteProduct:s,mobile:c},t)})),""!==b&&t.map((function(e,t){return e.name.toLowerCase().includes(b.toLowerCase())&&Object(n.jsx)(Ie,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(x,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,available:e.available,updateProductAvailability:o,updateProduct:i,addToCart:l,user:r,deleteProduct:s,mobile:c},t)}))]})};var Te=function(e){var t=e.addProduct,r=Object(a.useState)(),s=Object(u.a)(r,2),o=s[0],c=s[1],i=Object(a.useRef)(),l=Object(a.useRef)(),d=Object(a.useRef)();return Object(n.jsx)(le,{children:Object(n.jsxs)("form",{className:"create-product-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var r=new FormData;r.append("productImage",o,o.name),r.append("name",i.current.value),r.append("price",l.current.value),r.append("videoURL",d.current.value);t(e,r,{headers:{"content-type":"multipart/form-data"}})},children:[Object(n.jsx)(de,{ref:i,type:"text",name:"productName",id:"productName",placeholder:"Enter a product name",required:!0}),Object(n.jsx)(de,{ref:l,type:"number",name:"price",id:"price",placeholder:"Set a product price",required:!0}),Object(n.jsx)(de,{onChange:function(e){return c(e.target.files[0])},type:"file",name:"productImage",id:"productImage",placeholder:"Upload a product image",required:!0}),Object(n.jsx)(de,{ref:d,type:"text",name:"videoURL",id:"videoURL",placeholder:"Paste a video URL for the product ad",required:!0}),Object(n.jsx)(ue,{style:{width:"260px"},type:"submit",children:"Create Product"})]})})},Ue=r.p+"static/media/apple-products.7abda74a.jpeg";function Ee(){var e=Object(re.a)(['\n    position: absolute;\n    top: 68px;\n    height: 100vh;\n    width: 100vw;\n    left: 0;\n    display: flex;\n    background-image: url("','");\n    background-position: center;\n    justify-content: center;\n    align-items: center;\n  ']);return Ee=function(){return e},e}function De(){var e=Object(re.a)(["\n    width: 50vw;\n    background-color: white;\n    border: none;\n    border-radius: 0.5rem;\n    height: auto;\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n    color: #212a31;\n    margin-left: auto;\n    margin-right: auto;\n    padding: 40px;\n  "]);return De=function(){return e},e}var Be=function(){var e=ne.a.div(De()),t=ne.a.div(Ee(),Ue);return Object(n.jsx)(t,{children:Object(n.jsxs)(e,{children:[Object(n.jsxs)("h1",{className:"welcome",children:["Welcome to the Apple Shop ",Object(n.jsx)("i",{className:"fab fa-apple"}),"!"]}),Object(n.jsx)("h3",{className:"landing",children:"Your one stop shopping experience for all things Apple. We pride ourselves in being a premier supplier of Apple products."}),Object(n.jsx)(c.b,{to:"/apple_shop/products",children:Object(n.jsx)(ue,{children:"Browse"})})]})})};function $e(){var e=Object(re.a)(['\n    border: none;\n    border-bottom: solid 1px #212a31;\n    outline: none;\n    cursor: pointer;\n    font-family: "Roboto Condensed", sans-serif;\n    background: none;\n    font-size: 16px;\n    transition: all 0.3s;\n    &:hover {\n      background-color: #212a31;\n      color: white;\n      transform: scale(1.2);\n      border: solid 1px white;\n      border-radius: 0.4rem;\n      margin-left: 10px;\n    }\n  ']);return $e=function(){return e},e}var Me=function(e){var t=e.handleLogin,r=ne.a.button($e()),s=Object(a.useRef)(),o=Object(a.useRef)();return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(n.jsxs)("h1",{style:{textAlign:"center"},children:["Welcome to Apple Shop ",Object(n.jsx)("i",{className:"fab fa-apple"})]})}),Object(n.jsxs)(le,{children:[Object(n.jsxs)("form",{onSubmit:function(e){var r={email:s.current.value,password:o.current.value};t(e,r)},children:[Object(n.jsx)(de,{type:"email",name:"email",id:"email",placeholder:"Email address",ref:s}),Object(n.jsx)(de,{type:"password",name:"password",id:"password",placeholder:"Password",ref:o}),Object(n.jsx)("br",{}),Object(n.jsx)(ue,{type:"submit",children:"Login"})]}),Object(n.jsxs)("footer",{children:["New user?"," ",Object(n.jsx)(c.b,{to:"/apple_shop/register",children:Object(n.jsx)(r,{children:"Register here"})})]})]})]})},Ve=r(138),We=r.p+"static/media/apple_shop_wave.a2b3e177.svg",Je=r(137),Ye=r(22),He=r(141),Ze=r(65),Ge=r.n(Ze);function Ke(){var e=Object(re.a)(['\n  position: absolute;\n  left: 0;\n  padding-left: 40px;\n  padding-top: 10px;\n  top: 80px;\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  z-index: 100;\n  width: 105vw;\n  animation: enterTopRight 0.5s;\n  transform-origin: 0% 0%;\n  background-image: url("','");\n  height: 100vh;\n']);return Ke=function(){return e},e}function Qe(){var e=Object(re.a)(["\n  position: absolute;\n  top: 80px;\n  transform-origin: 0% 0%;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  border: 2px solid #333d51;\n  animation: ",' 0.5s ease-in-out;\n  right: 142px;\n  z-index: 10;\n  background: white;\n  width: 12rem;\n  height: auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  border-radius: 0.3rem;\n  > a {\n    width: 100%;\n    > button {\n      width: 100%;\n      margin: 0;\n      :hover {\n        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px,\n          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;\n      }\n    }\n  }\n  > button {\n    margin: 0;\n    margin-bottom: 10px;\n    width: 100%;\n    :hover {\n      box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px,\n        rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;\n    }\n  }\n  &:after {\n    content: "";\n    position: absolute;\n    bottom: 100%;\n    left: 71.2%;\n    margin-left: -10px;\n    border-width: 10px;\n    border-style: solid;\n    border-color: transparent transparent #fff transparent;\n  }\n']);return Qe=function(){return e},e}function Xe(){var e=Object(re.a)(["\n  from {\n    opacity: 0;\n    transform: scaleY(0);\n    visibility: hidden;\n  } to {\n    opacity: 1;\n    transform: scaleY(1);\n    visibility: visible;\n  }\n"]);return Xe=function(){return e},e}function et(){var e=Object(re.a)(["\n  width: ",";\n  height: ",";\n  background: ",";\n  color: ",';\n  font-family: "Roboto Condensed", sans-serif;\n  font-size: ',";\n  font-weight: bold;\n  outline: none;\n  cursor: pointer;\n  border: none;\n  border-radius: 0.3rem;\n  transition: all 0.5s;\n  &:hover {\n    color: #d3ac2b;\n    transform: scale(1.1);\n  }\n\n  margin-right: ",";\n  margin-top: ",";\n  text-align: center;\n"]);return et=function(){return e},e}function tt(){var e=Object(re.a)(["\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100%;\n  background-color: #333d51;\n  height: 67px;\n  padding: 10px;\n  z-index: 8;\n"]);return tt=function(){return e},e}var rt=Object(Ye.a)((function(e){return{badge:{right:-3,top:5,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(Je.a),nt=ne.a.nav(tt()),at=ne.a.button(et(),(function(e){return e.mobileSite?"100%":"120px"}),(function(e){return e.mobileSite?"2rem":"60px"}),(function(e){return e.mobileSite?"#333d51":"none"}),(function(e){return e.mobileSite?"#f4f3ea":"#333d51"}),(function(e){return e.mobileSite?"24px":"16px"}),(function(e){return e.mobileSite?"0":"40px"}),(function(e){return e.mobileSite?"45px":"10px"})),st=Object(ne.b)(Xe()),ot=ne.a.div(Qe(),st),ct=ne.a.div(Ke(),We);var it=function(e){var t=e.logout,r=e.getOrders,s=e.user,o=e.mobile,i=e.cartCount,l=Object(a.useState)(!1),d=Object(u.a)(l,2),p=d[0],b=d[1],j=Object(a.useState)(!1),m=Object(u.a)(j,2),h=m[0],x=m[1],f=Object(a.useState)(!1),g=Object(u.a)(f,2),O=g[0],v=g[1],y="administrator"===s.role,w=!o&&O,S=function(){window.scrollY>0?x(!0):x(!1)};Object(a.useEffect)((function(){return window.addEventListener("scroll",S),function(){window.removeEventListener("scroll",S)}}),[]);var k=function(){return Object(n.jsx)(c.b,{to:"/apple_shop/cart",children:Object(n.jsx)("div",{className:"cart",style:{marginTop:"1rem",marginRight:o?"3rem":0,cursor:"pointer",color:"white",textAlign:"center",display:"flex",alignItems:"center",float:"right"},children:Object(n.jsx)(He.a,{"aria-label":"cart",children:Object(n.jsx)(rt,{badgeContent:i,color:"secondary",children:Object(n.jsx)(Ge.a,{style:{color:"white",fontSize:"xx-large"}})})})})})};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(nt,{style:{opacity:h?"0.8":"1"},children:[!o&&Object(n.jsx)(c.b,{to:"/apple_shop/home",children:Object(n.jsxs)("div",{className:"title",style:{float:"left",marginLeft:"20px",marginTop:"1.5rem",color:"#F4F3EA",fontSize:"24px"},children:[" ",Object(n.jsx)("i",{className:"fab fa-apple"})," Shop"]})}),!o&&Object(n.jsxs)("div",{className:"right-nav",style:{float:"right",marginRight:"5rem",display:"flex",width:"15rem",alignItems:"center",justifyContent:"space-around"},children:[Object(n.jsxs)("div",{className:"options",onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},style:{color:"#F4F3EA",fontSize:"14px",display:"flex",flexDirection:"column",cursor:"pointer",marginTop:"0.7rem",justifyContent:"center",alignItems:"center",zIndex:"101",height:"auto",minHeight:"60px"},children:[Object(n.jsx)("p",{style:{margin:"0"},children:"Hello, ".concat(s.username)}),Object(n.jsxs)("div",{style:{alignItems:"center",display:"flex",fontWeight:"bold",fontSize:"1rem"},children:["Accounts & Lists",Object(n.jsx)(Ve.a,{size:16})]}),w&&Object(n.jsxs)(ot,{children:[Object(n.jsx)(c.b,{to:"/apple_shop/orders",children:Object(n.jsx)(at,{onClick:function(){r(s.role),v(!1)},children:y?"Orders":"My Orders"})}),y&&Object(n.jsx)(c.b,{to:"/apple_shop/create-product",children:Object(n.jsx)(at,{onClick:function(){return v(!1)},children:"Create a Product"})}),Object(n.jsx)(c.b,{to:"/apple_shop/products",children:Object(n.jsx)(at,{onClick:function(){return v(!1)},children:"Products"})}),Object(n.jsx)(c.b,{to:"/apple_shop/password",children:Object(n.jsx)(at,{onClick:function(){return v(!1)},children:"Manage Passwords"})}),Object(n.jsx)(at,{onClick:t,children:"Logout"})]})]}),Object(n.jsx)(k,{})]}),o&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(at,{mobileSite:o,onClick:function(){return b(!p)},style:{float:"left",marginTop:"10px",width:"120px",fontSize:"20px",height:"50px"},children:p?Object(n.jsx)("i",{className:"fas fa-times fa-2x"}):Object(n.jsx)("i",{className:"fas fa-bars fa-2x"})}),Object(n.jsx)(k,{})]}),p&&Object(n.jsxs)(ct,{onClick:function(){return o&&b(!p)},children:[Object(n.jsx)(c.b,{to:"/apple_shop/home",children:Object(n.jsx)(at,{mobileSite:!0,children:"Home"})}),Object(n.jsx)(c.b,{to:"/apple_shop/orders",children:Object(n.jsx)(at,{mobileSite:!0,onClick:function(){return r(s.role)},children:y?"Orders":"My Orders"})}),y&&Object(n.jsx)(c.b,{to:"/apple_shop/create-product",children:Object(n.jsx)(at,{mobileSite:!0,children:"Create a Product"})}),Object(n.jsx)(c.b,{to:"/apple_shop/products",children:Object(n.jsx)(at,{mobileSite:!0,children:"Products"})}),Object(n.jsx)(c.b,{to:"/apple_shop/password",children:Object(n.jsx)(at,{mobileSite:!0,children:"Manage Passwords"})}),Object(n.jsx)("div",{className:"logout",style:{width:"80vw",left:"0",position:"relative",border:"none",display:"flex",alignItems:"flex-start",marginTop:"10vh"},children:Object(n.jsx)(c.b,{children:Object(n.jsx)(at,{style:{background:"none",color:"#333d51"},mobileSite:!0,onClick:t,children:"Logout"})})})]})]})})};function lt(){var e=Object(re.a)(['\n  display: grid;\n  width: 80%;\n  grid-template-areas:\n    "pic title"\n    "pic price"\n    "pic subtotal"\n    "pic order";\n  padding: 2rem;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  grid-template-columns: 1fr 2fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  border: 1px solid lightgrey;\n  margin-bottom: 1rem;\n  border-radius: 0.4rem;\n  background: white;\n']);return lt=function(){return e},e}var dt=ne.a.div(lt());var ut=function(e){var t=e.image,r=e.title,a=e.productId,s=e.addToCart,o=e.price,c=e.quantity,i=e.subtotal;return Object(n.jsxs)(dt,{children:[Object(n.jsx)("div",{className:"order-image",style:{gridArea:"pic",width:"200px"},children:Object(n.jsx)("img",{src:"".concat(x,"/").concat(t),alt:r,loading:"lazy",className:"product-img"})}),Object(n.jsx)("div",{className:"order-item-title",style:{gridArea:"title"},children:r}),Object(n.jsx)("div",{className:"order-item-price",style:{gridArea:"price"},children:Object(n.jsx)("strong",{children:"Price: $".concat((new Intl.NumberFormat).format(o)," x ").concat(c)})}),Object(n.jsx)("div",{className:"subtotal",style:{gridArea:"subtotal"},children:Object(n.jsx)("strong",{children:"Subtotal: $".concat(i,".00")})}),Object(n.jsx)("div",{className:"reorder",style:{gridArea:"order"},children:Object(n.jsx)(ue,{onClick:function(){s({product:a,quantity:1})},children:"Buy Again"})})]})};function pt(){var e=Object(re.a)(["\n  position: relative;\n  margin: 2rem auto;\n  width: 80vw;\n  height: auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: white;\n  border: 1px solid lightgrey;\n  border-radius: 0.4rem;\n"]);return pt=function(){return e},e}var bt=ne.a.div(pt());var jt=function(e){var t=e.date,r=e.total,a=e.orderId,s=e.user,o=e.addToCart,c=e.orderItems,i=e.mobile,l=function(e,t,r){return Object(n.jsxs)("div",{className:e,style:{display:"flex",flexDirection:"column",textAlign:"center"},children:[Object(n.jsx)("h3",{children:t}),Object(n.jsx)("div",{className:e,children:r})]})};return Object(n.jsxs)(bt,{children:[Object(n.jsxs)("div",{className:"order-header",style:{display:"flex",flexDirection:i?"column":"row",justifyContent:"space-between",alignItems:"center",background:"lightgrey",width:"100%",marginBottom:"1rem",padding:"1rem",borderRadius:"0.4rem",boxSizing:"border-box"},children:[!i&&l("user","USER",s),l("date-placed","ORDER PLACED",t),l("order-total","TOTAL",r),!i&&l("order-number","ORDER #",a)]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(n.jsx)(ut,{image:e.productImage,title:e.product,productId:e.productId,quantity:e.quantity,addToCart:o,price:e.unitPrice,subtotal:e.total},t)}))]})};function mt(){var e=Object(re.a)(["\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    top: 150px;\n    width: 100vw;\n    margin-left: auto;\n    margin-right: auto;\n  "]);return mt=function(){return e},e}var ht=function(e){var t=e.orders,r=e.mobile,a=e.addToCart,s=ne.a.div(mt());return Object(n.jsxs)(s,{children:[!t.length&&Object(n.jsx)("h2",{style:{marginLeft:"auto",marginRight:"auto"},children:"No orders placed yet!"}),null===t||void 0===t?void 0:t.map((function(e,t){return Object(n.jsx)(jt,{total:e.order.OrderTotal,user:e.order.user&&e.order.user,date:e.order.dateCreated,orderId:e.order.id,orderItems:e.order.items,addToCart:a,mobile:r},t)}))]})},xt=r(139),ft=r(140);var gt=function(e){var t=e.user,r=e.updatePassword,s=Object(a.useState)(""),o=Object(u.a)(s,2),c=o[0],i=o[1],l=Object(a.useState)(""),d=Object(u.a)(l,2),p=d[0],b=d[1],j=Object(a.useState)(""),m=Object(u.a)(j,2),h=m[0],x=m[1],f=p===h;return Object(n.jsxs)(le,{style:{width:"340px"},children:[Object(n.jsx)(te.a,{}),Object(n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!f)return te.b.error("Passwords do not match",je);var n={password:t.password,newPassword:p,currentPassword:c};r(e,n)},className:"password-update",children:[Object(n.jsx)(de,{value:c,type:"password",name:"currentPassword",id:"currentPassword",placeholder:"Enter current password",onChange:function(e){return i(e.target.value)},required:!0}),Object(n.jsx)(de,{value:p,type:"password",name:"newPassword",id:"newPassword",placeholder:"Enter new password",onChange:function(e){return b(e.target.value)},required:!0}),p&&Object(n.jsxs)(pe,{children:[Object(n.jsxs)(be,{children:[/.{8,}/.test(p)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(n.jsxs)(be,{children:[/(?=.*?[A-Z])/.test(p)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(n.jsxs)(be,{children:[/(?=.*?[0-9])/.test(p)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(n.jsxs)(be,{children:[/(?=.*?[#?!@$%^&*-])/.test(p)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(n.jsx)(de,{value:h,type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Reenter new password",onChange:function(e){return x(e.target.value)},required:!0}),h&&Object(n.jsx)(pe,{style:{height:"auto"},children:Object(n.jsxs)(be,{children:[f?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:f?"Passwords match":"Passwords do not match"})]})}),Object(n.jsx)(ue,{disabled:!f||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(p),type:"submit",style:{width:"180px"},children:"Update Password"})]})]})};function Ot(){var e=Object(re.a)(['\n  border: none;\n  border-bottom: solid 1px black;\n  outline: none;\n  cursor: pointer;\n  font-family: "Roboto Condensed", sans-serif;\n  background: none;\n  font-size: 16px;\n  transition: all 0.3s;\n  &:hover {\n    background-color: #212a31;\n    color: white;\n    transform: scale(1.2);\n    border: solid 1px white;\n    border-radius: 0.4rem;\n  }\n']);return Ot=function(){return e},e}var vt=ne.a.button(Ot());var yt=function(e){var t=e.handleRegister,r=Object(a.useState)(""),s=Object(u.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)(""),d=Object(u.a)(l,2),p=d[0],b=d[1],j=Object(a.useState)(""),m=Object(u.a)(j,2),h=m[0],x=m[1],f=Object(a.useState)(""),g=Object(u.a)(f,2),O=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(u.a)(y,2),S=w[0],k=w[1],C=Object(a.useState)(!1),P=Object(u.a)(C,2),R=P[0],N=P[1],z=o===O;return Object(a.useEffect)((function(){p&&N(!1),h&&k(!1)}),[p,h]),Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(te.a,{}),Object(n.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(n.jsxs)("h1",{children:["Welcome to Apple Shop ",Object(n.jsx)("i",{className:"fab fa-apple"})]})}),Object(n.jsxs)(le,{style:{top:"60px",width:"340px"},children:[Object(n.jsxs)("form",{onSubmit:function(e,r){z||(te.b.error("Passwords do not match.",je),e.preventDefault()),p||(N(!0),e.preventDefault()),h||(k(!0),e.preventDefault()),h&&p&&z&&t(e,{email:p,password:o,username:h})},children:[Object(n.jsx)(de,{type:"text",name:"username",id:"username",placeholder:"Username",value:h,onChange:function(e){return x(e.target.value)}}),Object(n.jsx)("br",{}),S&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter a username"}),Object(n.jsx)("br",{})]}),Object(n.jsx)(de,{type:"email",name:"email",id:"email",placeholder:"Email address",value:p,onChange:function(e){return b(e.target.value)}}),Object(n.jsx)("br",{}),R&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter an email address"}),Object(n.jsx)("br",{})]}),Object(n.jsx)(de,{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){return i(e.target.value)},value:o}),Object(n.jsx)("br",{}),o&&Object(n.jsxs)(pe,{children:[Object(n.jsxs)(be,{children:[/.{8,}/.test(o)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(n.jsxs)(be,{children:[/(?=.*?[A-Z])/.test(o)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(n.jsxs)(be,{children:[/(?=.*?[0-9])/.test(o)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(n.jsxs)(be,{children:[/(?=.*?[#?!@$%^&*-])/.test(o)?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(n.jsx)(de,{type:"password",name:"confirm",id:"confirm",placeholder:"Confirm Password",value:O,onChange:function(e){return v(e.target.value)}}),Object(n.jsx)("br",{}),O&&Object(n.jsx)(pe,{style:{height:"auto"},children:Object(n.jsxs)(be,{children:[z?Object(n.jsx)(xt.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ft.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:z?"Passwords match":"Passwords do not match"})]})}),Object(n.jsx)(ue,{disabled:!z||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(o),type:"submit",children:"Register"})]}),Object(n.jsx)("footer",{children:Object(n.jsx)(c.b,{to:"/apple_shop",children:Object(n.jsx)(vt,{children:"Log in instead?"})})})]})]})},wt=r(35);var St=function(){var e=g("mobile",!1),t=Object(u.a)(e,2),r=t[0],s=t[1],o=g("progress",0),c=Object(u.a)(o,2),i=c[0],m=c[1],h=Object(a.useState)(0),x=Object(u.a)(h,2),f=x[0],O=x[1],v=Object(wt.b)(),y=Object(wt.c)((function(e){return e})),w=y.user,R=y.orders,N=y.products,z=y.cart;Object(a.useEffect)((function(){var e=z.items?z.items.reduce((function(e,t){return e+t.quantity}),0):0;O(e)}),[z]);var I=Object(p.f)();Object(a.useEffect)((function(){window.addEventListener("load",(function(){var e;ee(null!==(e=w.token)&&void 0!==e?e:"")})),window.addEventListener("resize",(function(){return window.innerWidth<768?s(!0):s(!1)}))})),Object(a.useEffect)((function(){window.innerWidth<768?s(!0):s(!1)}),[s]);var A=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.get("/cart");case 3:t=e.sent,v(Z(t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(Y(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="administrator"===t?"/orders/admin":"/orders",e.prev=1,e.next=4,X.get(r);case 4:(n=e.sent).data.orders?v(B(n.data.orders.reverse())):v(B([])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v($(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.get("/products");case 3:t=e.sent,v(F(t.data.products.reverse())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(_(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),U=function(e){var t=Object(b.a)(e),r=t.username,n=t.email,a=t.role,s=t.password,o=t.userId;v(k({username:r,email:n,role:a,password:s,userId:o,token:e}))},E=function(){var e=Object(d.a)(l.a.mark((function e(t,r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(40),t.preventDefault(),v(S()),v(D()),v(L()),v(H()),e.prev=6,e.next=9,X.post("/users/signin",r);case 9:n=e.sent,t.target.reset(),m(100),ee(n.data.token),U(n.data.token),A(),q(w.role),T(),te.b.success("Successfully logged in!",je),I("/apple_shop/home"),e.next=28;break;case 21:e.prev=21,e.t0=e.catch(6),m(100),console.log(e.t0),v(C((a=function(){return e.t0.message.includes("401")?"Email/Password combination incorrect. Try again.":e.t0.message.includes("404")?"User not found.":void 0})())),te.b.error(a(),je);case 28:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t,r){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(40),t.preventDefault(),e.prev=2,e.next=5,X.post("/users/signup",r);case 5:e.sent.data&&(te.b.success("Product successfully created",je),T(),I("/apple_shop/products")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),m(100),te.b.error(e.t0.message,je);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(L()),e.prev=1,e.next=4,X.post("/products",r);case 4:e.sent.data&&(te.b.success("Product successfully created",je),T(),I("/apple_shop/products")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),v(_(e.t0)),te.b.error(e.t0.message,je);case 12:return e.prev=12,t.target.reset(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(l.a.mark((function e(t,r,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(L()),e.prev=1,e.next=4,X.put("/products/".concat(r),n);case 4:e.sent.data&&(te.b.success("Product successfully updated",je),T(),I("/apple_shop/products")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),v(_(e.t0)),te.b.error(e.t0.message,je);case 12:return e.prev=12,t.target.reset(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t,r,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(L()),r={productId:t},e.prev=2,e.next=5,X.delete("/orders/delete",{data:r});case 5:if(!e.sent.data){e.next=11;break}return e.next=9,X.delete("/products/".concat(t));case 9:e.sent.data&&(te.b.success("Product successfully deleted",je),T(),I("/apple_shop/products"));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),v(_(e.t0)),te.b.error(e.t0.message,je);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.put("/users/".concat(w.userId),r);case 3:e.sent.data&&(te.b.success("Password successfully updated",je),I("/apple_shop/home")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.message.includes("401")?"Incorrect password. Try again.":e.t0.message,te.b.error(n,je);case 11:return e.prev=11,t.target.reset(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(L()),e.prev=1,e.next=4,X.put(t);case 4:e.sent.data&&(te.b.success("Product availability successfully updated",je),T(),I("/apple_shop/products")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),v(_(e.t0)),te.b.error(e.t0.message,je);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(H()),e.prev=1,e.next=4,X.post("/cart",t);case 4:e.sent.data&&(te.b.success("Product successfully added to cart",je),A()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),v(Y(e.t0)),te.b.error(e.t0.message,je);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.put("/cart/update",t);case 3:e.sent.data&&(te.b.success("Cart successfully updated",je),A()),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),v(Y(e.t0)),te.b.error(e.t0.message,je);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(H()),e.prev=1,e.next=4,X.put("/cart/remove",t);case 4:e.sent.data&&(te.b.success("Product successfully removed from cart",je),A()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),v(Y(e.t0)),te.b.error(e.t0.message,je);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(D()),v(H()),e.prev=2,e.next=5,X.post("/orders");case 5:e.sent.data&&(te.b.success("Order successfully placed",je),q(w.role),A()),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),v(Y(e.t0)),v($(e.t0)),te.b.error(e.t0.message,je);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(j.a,{color:"blue",progress:i,onLoaderFinished:function(){return m(0)}}),Object(n.jsx)(te.a,{}),w.user.isLoggedIn&&Object(n.jsx)(it,{logout:function(){ee(""),te.b.dark("Logged out.",je),I("/apple_shop"),v(P()),sessionStorage.clear()},getOrders:q,user:w.user,mobile:r,cartCount:f}),Object(n.jsxs)(p.c,{children:[Object(n.jsx)(p.a,{exact:!0,path:"/apple_shop",element:Object(n.jsx)(Me,{handleLogin:E})}),Object(n.jsx)(p.a,{path:"/apple_shop/home",element:Object(n.jsx)(Be,{})}),Object(n.jsx)(p.a,{path:"/apple_shop/register",element:Object(n.jsx)(yt,{handleRegister:M})}),Object(n.jsx)(p.a,{path:"/apple_shop/products",element:Object(n.jsx)(qe,{products:N.products,user:w.user,addToCart:Q,deleteProduct:J,updateProductAvailability:K,updateProduct:W,mobile:r})}),Object(n.jsx)(p.a,{path:"/apple_shop/orders",element:Object(n.jsx)(ht,{orders:R.orders,mobile:r,addToCart:Q})}),Object(n.jsx)(p.a,{path:"/apple_shop/cart",element:Object(n.jsx)(ye,{updateCart:re,cart:z,count:f,removeFromCart:ne,placeOrder:ae,mobile:r})}),Object(n.jsx)(p.a,{path:"/apple_shop/create-product",element:Object(n.jsx)(Te,{addProduct:V})}),Object(n.jsx)(p.a,{path:"/apple_shop/password",element:Object(n.jsx)(gt,{user:w.user,updatePassword:G})})]})]})};r(118);o.a.render(Object(n.jsx)(wt.a,{store:Q,children:Object(n.jsx)(c.a,{children:Object(n.jsx)(St,{})})}),document.querySelector("#root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.a62b2ce3.chunk.js.map