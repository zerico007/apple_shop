(this["webpackJsonpshop-frontend"]=this["webpackJsonpshop-frontend"]||[]).push([[0],{122:function(e,t,r){},123:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),s=r(19),c=r.n(s),o=r(12),i=r(16),d=r(8),l=r.n(d),u=r(15),p=r(7),b=r(13),j=r(40),m=r(61),h=r(62),f=r.n(h),x="https://apple-shop-backend.herokuapp.com",g=r(26);function O(e,t){var r=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem(e))||t})),n=Object(p.a)(r,2),s=n[0],c=n[1];return Object(a.useEffect)((function(){sessionStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,c]}var v=sessionStorage.store?JSON.parse(sessionStorage.store):null,y=v?v.user:{user:{userId:"",username:"",email:"",password:"",role:"",token:"",isLoggedIn:!1,isLoading:!1,error:null}},w=Object(g.b)({name:"user",initialState:y,reducers:{login:function(e){e.user.isLoading=!0,e.user.error=null},loginSuccess:function(e,t){var r=t.payload;e.user.isLoading=!1,e.user.isLoggedIn=!0,e.user.userId=r.userId,e.user.username=r.username,e.user.email=r.email,e.user.password=r.password,e.user.role=r.role,e.user.token=r.token},loginFailure:function(e,t){e.user.isLoading=!1,e.user.error=t.payload},logout:function(e){e.user.isLoggedIn=!1,e.user.userId="",e.user.username="",e.user.email="",e.user.password="",e.user.role="",e.user.token=""},resetUsertoken:function(e,t){var r=t.payload;e.user.token=r}}}),S=w.actions,k=S.login,C=S.loginSuccess,P=S.loginFailure,R=S.logout,N=S.resetUsertoken,z=w.reducer,I=v?v.products:{products:[],loading:!1,error:null},A=Object(g.b)({name:"products",initialState:I,reducers:{getProductsRequest:function(e){e.loading=!0,e.error=null},getProductsSuccess:function(e,t){e.products=t.payload.reverse(),e.loading=!1,e.error=null},getProductsFailure:function(e,t){e.loading=!1,e.error=t.payload}}}),L=A.actions,F=L.getProductsRequest,_=L.getProductsSuccess,q=L.getProductsFailure,T=A.reducer,U=v?v.orders:{orders:[],loading:!1,error:null},E=Object(g.b)({name:"orders",initialState:U,reducers:{getOrdersRequest:function(e){e.loading=!0,e.error=null},getOrdersSuccess:function(e,t){e.orders=t.payload,e.loading=!1,e.error=null},getOrdersFailure:function(e,t){e.error=t.payload,e.loading=!1}}}),D=E.actions,B=D.getOrdersRequest,$=D.getOrdersSuccess,M=D.getOrdersFailure,V=E.reducer,W=v?v.cart:{total:"",items:[],user:"",loading:!1,error:null},J=Object(g.b)({name:"cart",initialState:W,reducers:{getCartRequest:function(e){e.loading=!0,e.error=null},getCartSuccess:function(e,t){var r=t.payload;if(e.loading=!1,r.message)return e.total="",void(e.items=[]);e.total=r.Total,e.items=r.items,e.user=r.user},getCartFailure:function(e,t){var r=t.payload;e.loading=!1,e.error=r}}}),H=J.actions,Y=H.getCartFailure,Z=H.getCartRequest,X=H.getCartSuccess,G={user:z,products:T,orders:V,cart:J.reducer},K=Object(g.a)({reducer:G}),Q=K;K.subscribe((function(){sessionStorage.clear(),sessionStorage.setItem("store",JSON.stringify(K.getState()))}));var ee=f.a.create({baseURL:"https://apple-shop-backend.herokuapp.com/api"});ee.interceptors.response.use((function(e){var t,r=ee.defaults.headers.common.Authorization&&ee.defaults.headers.common.Authorization.split(" ")[1];r&&(1e3*Object(j.a)(r).exp<Date.now()?(console.log("token expired"),e.headers["shop-refreshed-access-token"]&&(t=e.headers["shop-refreshed-access-token"],Q.dispatch(N(t)),te(t),console.info("access token renewed"))):console.info("token still good"));return e}),(function(e){return Promise.reject(e)}));var te=function(e){ee.defaults.headers.common.Authorization="Bearer ".concat(e),console.log("Set bearer token, ".concat(e))},re=r(6),ne=(r(56),r(3)),ae=r(4);function se(){var e=Object(ne.a)(["\n  height: 1.5rem;\n  width: fit-content;\n  padding: 3px;\n  display: flex;\n  flex-direction: row;\n"]);return se=function(){return e},e}function ce(){var e=Object(ne.a)(["\n  width: 320px;\n  height: 170px;\n  display: flex;\n  flex-direction: column;\n  row-gap: 0.7rem;\n  padding: 10px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n  background: linear-gradient(0.25turn, #cbd0d8, #f4f3ea);\n  border: none;\n  border-radius: 4px;\n"]);return ce=function(){return e},e}function oe(){var e=Object(ne.a)(['\n  height: 2.5em;\n  font-size: 16px;\n  width: 100px;\n  padding: 5px;\n  margin-top: 10px;\n  margin-bottom: 15px;\n  color: #333d51;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  background-color: #ffcc00;\n  transition: all 0.3s;\n  &:hover {\n    background-color: #e5b700;\n    color: #212a31;\n    transform: scale(1.1);\n  }\n  outline: none;\n  cursor: pointer;\n  &:active {\n    transform: translateY(4px);\n  }\n  border-radius: 0.4rem;\n  font-family: "Roboto Condensed", sans-serif;\n  font-weight: 700;\n  border: none;\n']);return oe=function(){return e},e}function ie(){var e=Object(ne.a)(['\n  height: 1.5em;\n  width: 250px;\n  border-bottom: 2px solid gray;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  padding: 10px;\n  font-family: "Roboto Condensed", sans-serif;\n  font-size: 16px;\n  border-top: none;\n  border-left: none;\n  border-right: none;\n']);return ie=function(){return e},e}function de(){var e=Object(ne.a)(["\n  top: 150px;\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n  background: white;\n  width: 300px;\n  border: none;\n  border-radius: 0.3rem;\n  padding: 20px;\n"]);return de=function(){return e},e}var le=ae.a.div(de()),ue=ae.a.input(ie()),pe=ae.a.button(oe()),be=ae.a.div(ce()),je=ae.a.div(se()),me={position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0};function he(){var e=Object(ne.a)(['\n        border: none;\n        border-bottom: solid 1px #212a31;\n        outline: none;\n        cursor: pointer;\n        font-family: "Roboto Condensed", sans-serif;\n        background: none;\n        font-size: 16px;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #212a31;\n            color: white;\n            transform: scale(1.2);\n            border: solid 1px white;\n            border-radius: 0.4rem;\n            margin-left: 10px;\n        }\n    ']);return he=function(){return e},e}var fe=function(e){var t=e.handleLogin,r=ae.a.button(he()),s=Object(a.useRef)(),c=Object(a.useRef)();return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(n.jsxs)("h1",{style:{textAlign:"center"},children:["Welcome to Apple Shop ",Object(n.jsx)("i",{className:"fab fa-apple"})]})}),Object(n.jsxs)(le,{children:[Object(n.jsxs)("form",{onSubmit:function(e){var r={email:s.current.value,password:c.current.value};t(e,r)},children:[Object(n.jsx)(ue,{type:"email",name:"email",id:"email",placeholder:"Email address",ref:s}),Object(n.jsx)(ue,{type:"password",name:"password",id:"password",placeholder:"Password",ref:c}),Object(n.jsx)("br",{}),Object(n.jsx)(pe,{type:"submit",children:"Login"})]}),Object(n.jsxs)("footer",{children:["New user? ",Object(n.jsx)(o.b,{to:"/apple_shop/register",children:Object(n.jsx)(r,{children:"Register here"})})]})]})]})},xe=r(141),ge=r(142);function Oe(){var e=Object(ne.a)(['\n  border: none;\n  border-bottom: solid 1px black;\n  outline: none;\n  cursor: pointer;\n  font-family: "Roboto Condensed", sans-serif;\n  background: none;\n  font-size: 16px;\n  transition: all 0.3s;\n  &:hover {\n    background-color: #212a31;\n    color: white;\n    transform: scale(1.2);\n    border: solid 1px white;\n    border-radius: 0.4rem;\n  }\n']);return Oe=function(){return e},e}var ve=ae.a.button(Oe());var ye=function(e){var t=e.handleRegister,r=Object(a.useState)(""),s=Object(p.a)(r,2),c=s[0],i=s[1],d=Object(a.useState)(""),l=Object(p.a)(d,2),u=l[0],b=l[1],j=Object(a.useState)(""),m=Object(p.a)(j,2),h=m[0],f=m[1],x=Object(a.useState)(""),g=Object(p.a)(x,2),O=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(p.a)(y,2),S=w[0],k=w[1],C=Object(a.useState)(!1),P=Object(p.a)(C,2),R=P[0],N=P[1],z=c===O;return Object(a.useEffect)((function(){u&&N(!1),h&&k(!1)}),[u,h]),Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(re.a,{}),Object(n.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(n.jsxs)("h1",{children:["Welcome to Apple Shop ",Object(n.jsx)("i",{className:"fab fa-apple"})]})}),Object(n.jsxs)(le,{style:{top:"60px",width:"340px"},children:[Object(n.jsxs)("form",{onSubmit:function(e,r){z||(re.b.error("Passwords do not match.",me),e.preventDefault()),u||(N(!0),e.preventDefault()),h||(k(!0),e.preventDefault()),h&&u&&z&&t(e,{email:u,password:c,username:h})},children:[Object(n.jsx)(ue,{type:"text",name:"username",id:"username",placeholder:"Username",value:h,onChange:function(e){return f(e.target.value)}}),Object(n.jsx)("br",{}),S&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter a username"}),Object(n.jsx)("br",{})]}),Object(n.jsx)(ue,{type:"email",name:"email",id:"email",placeholder:"Email address",value:u,onChange:function(e){return b(e.target.value)}}),Object(n.jsx)("br",{}),R&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter an email address"}),Object(n.jsx)("br",{})]}),Object(n.jsx)(ue,{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){return i(e.target.value)},value:c}),Object(n.jsx)("br",{}),c&&Object(n.jsxs)(be,{children:[Object(n.jsxs)(je,{children:[/.{8,}/.test(c)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(n.jsxs)(je,{children:[/(?=.*?[A-Z])/.test(c)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(n.jsxs)(je,{children:[/(?=.*?[0-9])/.test(c)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(n.jsxs)(je,{children:[/(?=.*?[#?!@$%^&*-])/.test(c)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(n.jsx)(ue,{type:"password",name:"confirm",id:"confirm",placeholder:"Confirm Password",value:O,onChange:function(e){return v(e.target.value)}}),Object(n.jsx)("br",{}),O&&Object(n.jsx)(be,{style:{height:"auto"},children:Object(n.jsxs)(je,{children:[z?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:z?"Passwords match":"Passwords do not match"})]})}),Object(n.jsx)(pe,{disabled:!z||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(c),type:"submit",children:"Register"})]}),Object(n.jsx)("footer",{children:Object(n.jsx)(o.b,{to:"/apple_shop",children:Object(n.jsx)(ve,{children:"Log in instead?"})})})]})]})};var we=function(e){var t=e.productId,r=e.toggle,s=e.display,c=e.deleteProduct,o=e.addToCart,i=e.UpdateProductModal,d=Object(a.useRef)();return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(re.a,{}),Object(n.jsx)("div",{className:"modal modal-".concat(t),style:{top:"0px"},children:Object(n.jsxs)("div",{className:"modal-content",children:["order"===s&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("h3",{className:"order-modal",children:"How many would you like to add?"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r("modal");var n=d.current.value;if("0"===n)return re.b.error("Please enter a quantity",me);console.log(t,n),o({product:t,quantity:n}),e.target.reset()},children:[Object(n.jsx)(ue,{type:"number",name:"quantity",defaultValue:"1",ref:d,style:{textAlign:"center"}}),Object(n.jsx)("br",{}),Object(n.jsx)(pe,{type:"submit",style:{width:"130px"},children:"Confirm"})]})]}),"delete"===s&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("h3",{className:"delete-modal",children:"Are you sure you want to delete this product?"}),Object(n.jsx)(pe,{onClick:function(){return c(t)},style:{width:"120px",alignSelf:"center"},children:"Confirm Delete"})]}),"update"===s&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(i,{})}),Object(n.jsx)(pe,{style:{alignSelf:"center"},onClick:function(){return r("modal")},children:"Cancel"})]})})]})},Se=r(63),ke=r.n(Se);var Ce=function(e){var t=e.videoURL,r=e.productId,a=e.showCloseButton,s=e.closeButton,c=e.setMountVideo,o=e.mountVideo,i=e.mobile;return Object(n.jsxs)("div",{className:"video-div video-".concat(r),style:{top:"0px"},children:[Object(n.jsx)(ke.a,{className:"video-player",style:{left:i?"0":"25vw"},url:t,playing:o,controls:!1,width:i?"97vw":"600px",height:"500px",pip:!0,playsinline:!0,stopOnUnmount:!0}),s&&Object(n.jsxs)("button",{className:"close-video",onClick:function(){a(),c(!o)},children:["Close ",Object(n.jsx)("i",{className:"far fa-times-circle"})]})]})};function Pe(){var e=Object(ne.a)(["\n  width: auto;\n  height: auto;\n  transition: all 0.5s ease-in-out;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]);return Pe=function(){return e},e}function Re(){var e=Object(ne.a)(["\n  position: relative;\n  z-index: 3;\n  display: flex;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    just0fy-content: center;\n  }\n  margin: 20px auto 20px auto;\n  padding: 40px;\n  border: none;\n  border-radius: 0.5rem;\n\n  width: 50vw;\n  height: auto;\n  background: white; ;\n"]);return Re=function(){return e},e}var Ne=ae.a.div(Re()),ze=ae.a.div(Pe());var Ie=function(e){var t=e.img_url,r=e.price,s=e.title,c=e.id,o=e.videoURL,i=e.user,d=e.deleteProduct,l=e.available,u=e.updateProductAvailability,b=e.mobile,j=e.updateProduct,m=e.addToCart,h=Object(a.useState)(!1),f=Object(p.a)(h,2),x=f[0],g=f[1],O=Object(a.useState)(!1),v=Object(p.a)(O,2),y=v[0],w=v[1],S=Object(a.useState)(""),k=Object(p.a)(S,2),C=k[0],P=k[1],R=Object(a.useState)(),N=Object(p.a)(R,2),z=N[0],I=N[1],A=Object(a.useRef)(),L=Object(a.useRef)(),F=function(){setTimeout((function(){return g(!x)}),1500)},_=function(e){(e=document.querySelector(".".concat(e,"-").concat(c))).classList.toggle("on")},q=function(e){e.preventDefault();var t=new FormData;z&&t.append("productImage",z,z.name),L.current.value!==s&&t.append("newName",L.current.value),A.current.value!==r&&t.append("newPrice",A.current.value);_("modal"),P(""),z?j(e,c,t,{headers:{"content-type":"multipart/form-data"}}):j(e,c,t)},T="administrator"===i.role;return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(we,{productId:c,toggle:_,display:C,deleteProduct:d,UpdateProductModal:function(){return Object(n.jsx)(le,{style:{top:"0"},children:Object(n.jsxs)("form",{className:"update-product-form",onSubmit:q,encType:"multipart/form-data",children:[Object(n.jsx)(ue,{type:"text",id:"product-title",name:"product-title",ref:L,defaultValue:s}),Object(n.jsx)(ue,{type:"number",id:"product-price",name:"product-price",ref:A,defaultValue:r}),Object(n.jsx)(ue,{onChange:function(e){return I(e.target.files[0])},type:"file",name:"productImage",id:"productImage"}),Object(n.jsxs)(pe,{style:{width:"160px"},type:"submit",children:[" ","Confirm Update"]})]})})},addToCart:m}),y&&Object(n.jsx)(Ce,{videoURL:o,toggle:_,productId:c,showCloseButton:F,closeButton:x,mountVideo:y,setMountVideo:w,mobile:b}),Object(n.jsxs)(Ne,{children:[Object(n.jsxs)("div",{className:"left-side",style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:b?"center":"flex-start",width:"50%"},children:[Object(n.jsx)(ze,{children:t&&Object(n.jsx)("img",{src:t,alt:s,className:"product-img",loading:"lazy"})}),T&&Object(n.jsx)(pe,{style:{width:"150px",marginLeft:b?"0":"2rem"},onClick:function(){_("modal"),P("update")},children:"Update Product"}),T&&Object(n.jsx)(pe,{style:{width:"150px",marginLeft:b?"0":"2rem"},onClick:function(){return function(){var e="/products/".concat(c,l?"/unavailable":"/available");u(e)}()},children:"Update Availability"})]}),Object(n.jsxs)("div",{className:"right-side",style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"50%"},children:[Object(n.jsx)("div",{className:"product-title",children:Object(n.jsx)("p",{style:{textAlign:"center"},children:Object(n.jsx)("strong",{children:s})})}),Object(n.jsx)("div",{className:"product-price",children:Object(n.jsxs)("strong",{children:["Price: $",(new Intl.NumberFormat).format(r)]})}),Object(n.jsx)(pe,{className:l?"add-to-order-btn":"add-to-order-btn out-of-stock",style:{width:b?"130px":"100px"},onClick:function(){_("modal"),P("order")},disabled:!l,children:l?"Add to cart":"Out of Stock"}),Object(n.jsxs)(pe,{style:{gridArea:"video"},onClick:function(){F(),w(!y)},children:["Video ",Object(n.jsx)("i",{className:"fab fa-youtube"})]}),T&&Object(n.jsx)(pe,{style:{gridArea:"delete"},onClick:function(){_("modal"),P("delete")},children:"Delete"})]})]})]})};function Ae(){var e=Object(ne.a)(["\n    width: 75vw;\n    height: 2rem;\n    top: 150px;\n    margin-right: auto;\n    margin-left: auto;\n    margin-top: 20px;\n    margin-bottom: 20px;\n  "]);return Ae=function(){return e},e}var Le=function(e){var t=e.search,r=e.updateSearch,a=ae.a.div(Ae());return Object(n.jsxs)(a,{children:[Object(n.jsx)(ue,{style:{width:"100%",height:"2.5rem",border:"solid 3px #212a31",borderRadius:"0.4rem",boxSizing:"border-box",display:"flex",alignItems:"center"},type:"text",name:"search",id:"searchText",placeholder:"Search",value:t,onChange:function(e){return r(e.target.value)},autoFocus:!0}),Object(n.jsx)("i",{style:{float:"right",position:"relative",top:"-38px",right:"15px"},className:"fas fa-search"})]},"searching")};function Fe(){var e=Object(ne.a)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  top: 120px;\n  overflow: hidden;\n  width: 100vw;\n  margin-left: auto;\n  margin-right: auto;\n"]);return Fe=function(){return e},e}var _e=ae.a.div(Fe());var qe=function(e){var t=e.products,r=e.user,s=e.deleteProduct,c=e.updateProductAvailability,o=e.mobile,i=e.updateProduct,d=e.addToCart,l=Object(a.useState)(""),u=Object(p.a)(l,2),b=u[0],j=u[1];return Object(n.jsxs)(_e,{children:[Object(n.jsx)(Le,{updateSearch:function(e){j(e)},search:b}),""===b&&t.map((function(e,t){return Object(n.jsx)(Ie,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(x,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,available:e.available,updateProductAvailability:c,updateProduct:i,addToCart:d,user:r,deleteProduct:s,mobile:o},t)})),""!==b&&t.map((function(e,t){return e.name.toLowerCase().includes(b.toLowerCase())&&Object(n.jsx)(Ie,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(x,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,available:e.available,updateProductAvailability:c,updateProduct:i,addToCart:d,user:r,deleteProduct:s,mobile:o},t)}))]})},Te=r(144),Ue=r.p+"static/media/apple_shop_wave.a2b3e177.svg",Ee=r(143),De=r(25),Be=r(145),$e=r(64),Me=r.n($e);function Ve(){var e=Object(ne.a)(['\n  position: absolute;\n  left: 0;\n  padding-left: 40px;\n  padding-top: 10px;\n  top: 80px;\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  z-index: 100;\n  width: 105vw;\n  animation: enterTopRight 0.5s;\n  transform-origin: 0% 0%;\n  background-image: url("','");\n  height: 100vh;\n']);return Ve=function(){return e},e}function We(){var e=Object(ne.a)(['\n  position: absolute;\n  top: 72px;\n  transform: translateX(-1.25rem);\n  right: 100px;\n  z-index: 10;\n  background: white;\n  width: 18rem;\n  height: auto;\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  border-radius: 0.3rem;\n  &:after {\n    content: "";\n    position: absolute;\n    bottom: 100%;\n    left: 71.2%;\n    margin-left: -10px;\n    border-width: 10px;\n    border-style: solid;\n    border-color: transparent transparent white transparent;\n  }\n']);return We=function(){return e},e}function Je(){var e=Object(ne.a)(["\n  width: ",";\n  height: ",";\n  background: ",";\n  color: ",';\n  font-family: "Roboto Condensed", sans-serif;\n  font-size: ',";\n  font-weight: bold;\n  outline: none;\n  cursor: pointer;\n  border: none;\n  border-radius: 0.3rem;\n  transition: all 0.5s;\n  &:hover {\n    color: #d3ac2b;\n    transform: scale(1.1);\n  }\n\n  margin-right: ",";\n  margin-top: ",";\n  text-align: center;\n"]);return Je=function(){return e},e}function He(){var e=Object(ne.a)(["\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100%;\n  background-color: #333d51;\n  height: 67px;\n  padding: 10px;\n  z-index: 8;\n"]);return He=function(){return e},e}var Ye=Object(De.a)((function(e){return{badge:{right:-3,top:5,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(Ee.a),Ze=ae.a.nav(He()),Xe=ae.a.button(Je(),(function(e){return e.mobileSite?"100%":"120px"}),(function(e){return e.mobileSite?"2rem":"60px"}),(function(e){return e.mobileSite?"#333d51":"none"}),(function(e){return e.mobileSite?"#f4f3ea":"#333d51"}),(function(e){return e.mobileSite?"24px":"16px"}),(function(e){return e.mobileSite?"0":"40px"}),(function(e){return e.mobileSite?"45px":"10px"})),Ge=ae.a.div(We()),Ke=ae.a.div(Ve(),Ue);var Qe=function(e){var t=e.logout,r=e.getOrders,s=e.user,c=e.mobile,i=e.cartCount,d=Object(a.useState)(!1),l=Object(p.a)(d,2),u=l[0],b=l[1],j=Object(a.useState)(!1),m=Object(p.a)(j,2),h=m[0],f=m[1],x=Object(a.useState)(!1),g=Object(p.a)(x,2),O=g[0],v=g[1],y="administrator"===s.role,w=!c&&O,S=function(){window.scrollY>0?f(!0):f(!1)};Object(a.useEffect)((function(){return window.addEventListener("scroll",S),function(){window.removeEventListener("scroll",S)}}),[]);var k=function(){return Object(n.jsx)(o.b,{to:"/apple_shop/cart",children:Object(n.jsx)("div",{className:"cart",style:{marginTop:"1rem",marginRight:c?"3rem":0,cursor:"pointer",color:"white",textAlign:"center",display:"flex",alignItems:"center",float:"right"},children:Object(n.jsx)(Be.a,{"aria-label":"cart",children:Object(n.jsx)(Ye,{badgeContent:i,color:"secondary",children:Object(n.jsx)(Me.a,{style:{color:"white",fontSize:"xx-large"}})})})})})};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(Ze,{style:{opacity:h?"0.8":"1"},children:[!c&&Object(n.jsx)(o.b,{to:"/apple_shop/home",children:Object(n.jsxs)("div",{className:"title",style:{float:"left",marginLeft:"20px",marginTop:"1.5rem",color:"#F4F3EA",fontSize:"24px"},children:[" ",Object(n.jsx)("i",{className:"fab fa-apple"})," Shop"]})}),!c&&Object(n.jsxs)("div",{className:"right-nav",style:{float:"right",marginRight:"5rem",display:"flex",width:"15rem",alignItems:"center",justifyContent:"space-around"},children:[Object(n.jsxs)("div",{className:"options",onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},style:{color:"#F4F3EA",fontSize:"14px",display:"flex",flexDirection:"column",cursor:"pointer",marginTop:"0.7rem",justifyContent:"center",alignItems:"center",zIndex:"101",height:"auto",minHeight:"60px"},children:[Object(n.jsx)("p",{style:{margin:"0"},children:"Hello, ".concat(s.username)}),Object(n.jsxs)("div",{style:{alignItems:"center",display:"flex",fontWeight:"bold",fontSize:"1rem"},children:["Accounts & Lists",Object(n.jsx)(Te.a,{size:16})]}),w&&Object(n.jsxs)(Ge,{children:[Object(n.jsx)(o.b,{to:"/apple_shop/orders",children:Object(n.jsx)(Xe,{onClick:function(){r(s.role),v(!1)},children:y?"Orders":"My Orders"})}),y&&Object(n.jsx)(o.b,{to:"/apple_shop/create-product",children:Object(n.jsx)(Xe,{onClick:function(){return v(!1)},children:"Create a Product"})}),Object(n.jsx)(o.b,{to:"/apple_shop/products",children:Object(n.jsx)(Xe,{onClick:function(){return v(!1)},children:"Products"})}),Object(n.jsx)(o.b,{to:"/apple_shop/password",children:Object(n.jsx)(Xe,{onClick:function(){return v(!1)},children:"Manage Passwords"})}),Object(n.jsx)(Xe,{onClick:t,children:"Logout"})]})]}),Object(n.jsx)(k,{})]}),c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Xe,{mobileSite:c,onClick:function(){return b(!u)},style:{float:"left",marginTop:"10px",width:"120px",fontSize:"20px",height:"50px"},children:u?Object(n.jsx)("i",{className:"fas fa-times fa-2x"}):Object(n.jsx)("i",{className:"fas fa-bars fa-2x"})}),Object(n.jsx)(k,{})]}),u&&Object(n.jsxs)(Ke,{onClick:function(){return c&&b(!u)},children:[Object(n.jsx)(o.b,{to:"/apple_shop/home",children:Object(n.jsx)(Xe,{mobileSite:!0,children:"Home"})}),Object(n.jsx)(o.b,{to:"/apple_shop/orders",children:Object(n.jsx)(Xe,{mobileSite:!0,onClick:function(){return r(s.role)},children:y?"Orders":"My Orders"})}),y&&Object(n.jsx)(o.b,{to:"/apple_shop/create-product",children:Object(n.jsx)(Xe,{mobileSite:!0,children:"Create a Product"})}),Object(n.jsx)(o.b,{to:"/apple_shop/products",children:Object(n.jsx)(Xe,{mobileSite:!0,children:"Products"})}),Object(n.jsx)(o.b,{to:"/apple_shop/password",children:Object(n.jsx)(Xe,{mobileSite:!0,children:"Manage Passwords"})}),Object(n.jsx)("div",{className:"logout",style:{width:"80vw",left:"0",position:"relative",border:"none",display:"flex",alignItems:"flex-start",marginTop:"10vh"},children:Object(n.jsx)(o.b,{children:Object(n.jsx)(Xe,{style:{background:"none",color:"#333d51"},mobileSite:!0,onClick:t,children:"Logout"})})})]})]})})};function et(){var e=Object(ne.a)(['\n  display: grid;\n  width: 80%;\n  grid-template-areas:\n    "pic title"\n    "pic price"\n    "pic subtotal"\n    "pic order";\n  padding: 2rem;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  grid-template-columns: 1fr 2fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  border: 1px solid lightgrey;\n  margin-bottom: 1rem;\n  border-radius: 0.4rem;\n  background: white;\n']);return et=function(){return e},e}var tt=ae.a.div(et());var rt=function(e){var t=e.image,r=e.title,a=e.productId,s=e.addToCart,c=e.price,o=e.quantity,i=e.subtotal;return Object(n.jsxs)(tt,{children:[Object(n.jsx)("div",{className:"order-image",style:{gridArea:"pic",width:"200px"},children:Object(n.jsx)("img",{src:"".concat(x,"/").concat(t),alt:r,loading:"lazy",className:"product-img"})}),Object(n.jsx)("div",{className:"order-item-title",style:{gridArea:"title"},children:r}),Object(n.jsx)("div",{className:"order-item-price",style:{gridArea:"price"},children:Object(n.jsx)("strong",{children:"Price: $".concat((new Intl.NumberFormat).format(c)," x ").concat(o)})}),Object(n.jsx)("div",{className:"subtotal",style:{gridArea:"subtotal"},children:Object(n.jsx)("strong",{children:"Subtotal: $".concat(i,".00")})}),Object(n.jsx)("div",{className:"reorder",style:{gridArea:"order"},children:Object(n.jsx)(pe,{onClick:function(){s({product:a,quantity:1})},children:"Buy Again"})})]})};function nt(){var e=Object(ne.a)(["\n  position: relative;\n  margin: 2rem auto;\n  width: 80vw;\n  height: auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: white;\n  border: 1px solid lightgrey;\n  border-radius: 0.4rem;\n"]);return nt=function(){return e},e}var at=ae.a.div(nt());var st=function(e){var t=e.date,r=e.total,a=e.orderId,s=e.user,c=e.addToCart,o=e.orderItems,i=e.mobile,d=function(e,t,r){return Object(n.jsxs)("div",{className:e,style:{display:"flex",flexDirection:"column",textAlign:"center"},children:[Object(n.jsx)("h3",{children:t}),Object(n.jsx)("div",{className:e,children:r})]})};return Object(n.jsxs)(at,{children:[Object(n.jsxs)("div",{className:"order-header",style:{display:"flex",flexDirection:i?"column":"row",justifyContent:"space-between",alignItems:"center",background:"lightgrey",width:"100%",marginBottom:"1rem",padding:"1rem",borderRadius:"0.4rem",boxSizing:"border-box"},children:[!i&&d("user","USER",s),d("date-placed","ORDER PLACED",t),d("order-total","TOTAL",r),!i&&d("order-number","ORDER #",a)]}),null===o||void 0===o?void 0:o.map((function(e,t){return Object(n.jsx)(rt,{image:e.productImage,title:e.product,productId:e.productId,quantity:e.quantity,addToCart:c,price:e.unitPrice,subtotal:e.total},t)}))]})};function ct(){var e=Object(ne.a)(["\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    top: 150px;\n    width: 100vw;\n    margin-left: auto;\n    margin-right: auto;\n  "]);return ct=function(){return e},e}var ot=function(e){var t=e.orders,r=e.mobile,a=e.addToCart,s=ae.a.div(ct());return Object(n.jsxs)(s,{children:[!t.length&&Object(n.jsx)("h2",{style:{marginLeft:"auto",marginRight:"auto"},children:"No orders placed yet!"}),null===t||void 0===t?void 0:t.map((function(e,t){return Object(n.jsx)(st,{total:e.order.OrderTotal,user:e.order.user&&e.order.user,date:e.order.dateCreated,orderId:e.order.id,orderItems:e.order.items,addToCart:a,mobile:r},t)}))]})},it=r.p+"static/media/apple-products.7abda74a.jpeg";function dt(){var e=Object(ne.a)(["\n        position: absolute;\n        top: 68px;\n        height: 100vh;\n        width: 100vw;\n        left: 0;\n        display: flex;\n        background-image: url('","');\n        background-position: center;\n        justify-content: center;\n        align-items: center;\n    "]);return dt=function(){return e},e}function lt(){var e=Object(ne.a)(["\n        width: 50vw;\n        background-color: white;\n        border: none;\n        border-radius: 0.5rem;\n        height: auto;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        color: #212a31;\n        margin-left: auto;\n        margin-right: auto;\n        padding: 40px;\n    "]);return lt=function(){return e},e}var ut=function(){var e=ae.a.div(lt()),t=ae.a.div(dt(),it);return Object(n.jsx)(t,{children:Object(n.jsxs)(e,{children:[Object(n.jsxs)("h1",{className:"welcome",children:["Welcome to the Apple Shop ",Object(n.jsx)("i",{className:"fab fa-apple"}),"!"]}),Object(n.jsx)("h3",{className:"landing",children:"Your one stop shopping experience for all things Apple. We pride ourselves in being a premier supplier of Apple products."}),Object(n.jsx)(o.b,{to:"/apple_shop/products",children:Object(n.jsx)(pe,{children:"Browse"})})]})})};function pt(){var e=Object(ne.a)(["\n  width: 60px;\n  height: 2rem;\n  background: lightgrey;\n  border-radius: 0.4rem;\n  padding-left: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  cursor: pointer;\n  color: #212a31;\n  border: none;\n  outline: none;\n  background-color: #ffcc00;\n  transition: all 0.3s;\n  outline: none;\n  &:hover {\n    background-color: #e5b700;\n    transform: scale(1.1);\n  }\n"]);return pt=function(){return e},e}function bt(){var e=Object(ne.a)(['\n  display: grid;\n  width: 80%;\n  grid-template-areas:\n    "pic title"\n    "pic price"\n    "pic quantity"\n    "pic remove";\n  padding: 2rem;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  grid-template-columns: 1fr 2fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  border: 1px solid lightgrey;\n  margin-bottom: 1rem;\n  border-radius: 0.4rem;\n  background: white;\n']);return bt=function(){return e},e}var jt=ae.a.div(bt()),mt=ae.a.select(pt()),ht=function(e){var t=e.updateCart,r=e.productId,s=e.image,c=e.title,o=e.price,i=e.quantity,d=e.removeFromCart,l=Object(a.useState)(i),u=Object(p.a)(l,2),b=u[0],j=u[1];return Object(n.jsxs)(jt,{children:[Object(n.jsx)("div",{className:"cart-image",style:{gridArea:"pic",width:"200px"},children:Object(n.jsx)("img",{src:"".concat(x,"/").concat(s),alt:c,loading:"lazy",className:"product-img"})}),Object(n.jsx)("div",{className:"cart-item-title",style:{gridArea:"title"},children:c}),Object(n.jsx)("div",{className:"cart-item-price",style:{gridArea:"price"},children:Object(n.jsxs)("strong",{children:["Price: $",(new Intl.NumberFormat).format(o)]})}),Object(n.jsx)("div",{className:"cart-quantity-btn",style:{gridArea:"quantity"},children:Object(n.jsxs)(mt,{name:"quantity",id:"quantity",defaultValue:b,onChange:function(e){j(e.target.value);var n={product:r,quantity:e.target.value};t(n)},style:{},children:[Object(n.jsx)("option",{value:1,children:"1"}),Object(n.jsx)("option",{value:2,children:"2"}),Object(n.jsx)("option",{value:3,children:"3"}),Object(n.jsx)("option",{value:4,children:"4"}),Object(n.jsx)("option",{value:5,children:"5"})]})}),Object(n.jsx)("div",{className:"remove-from-cart",style:{gridArea:"remove"},children:Object(n.jsx)(pe,{onClick:function(){d({product:r})},children:"Remove"})})]})};function ft(){var e=Object(ne.a)(["\n  position: relative;\n  margin: 10rem auto;\n  width: 80vw;\n  height: auto;\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: white;\n  border: 1px solid lightgrey;\n  border-radius: 0.2rem;\n"]);return ft=function(){return e},e}var xt=ae.a.div(ft()),gt=function(e){var t,r=e.cart,a=e.updateCart,s=e.count,c=e.removeFromCart,o=e.placeOrder,i=e.mobile;return Object(n.jsxs)(xt,{children:[Object(n.jsxs)("div",{className:"cart-header",style:{display:"flex",flexDirection:i?"column":"row",justifyContent:"space-between",alignItems:"center",width:"87%",borderBottom:"1px solid lightgrey",marginBottom:"1rem"},children:[Object(n.jsx)("h2",{children:"Shopping Cart"}),Object(n.jsx)("div",{className:"cart-total",children:Object(n.jsxs)("strong",{children:["Subtotal (".concat(s," items): "),"".concat(r.total||"$0.00")]})}),r.items&&Object(n.jsx)(pe,{onClick:o,children:"Place Order"})]}),null===(t=r.items)||void 0===t?void 0:t.map((function(e,t){return Object(n.jsx)(ht,{image:e.product.productImage,title:e.product.name,price:e.product.price,quantity:e.quantity,productId:e.product._id,updateCart:a,removeFromCart:c},t)})),!r.items&&Object(n.jsx)("div",{className:"empty-cart",style:{textAlign:"center"},children:Object(n.jsx)("h1",{children:"Your Shopping Cart is Empty. Fill it with goodies that you love!"})})]})};var Ot=function(e){var t=e.addProduct,r=Object(a.useState)(),s=Object(p.a)(r,2),c=s[0],o=s[1],i=Object(a.useRef)(),d=Object(a.useRef)(),l=Object(a.useRef)();return Object(n.jsx)(le,{children:Object(n.jsxs)("form",{className:"create-product-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var r=new FormData;r.append("productImage",c,c.name),r.append("name",i.current.value),r.append("price",d.current.value),r.append("videoURL",l.current.value);t(e,r,{headers:{"content-type":"multipart/form-data"}})},children:[Object(n.jsx)(ue,{ref:i,type:"text",name:"productName",id:"productName",placeholder:"Enter a product name",required:!0}),Object(n.jsx)(ue,{ref:d,type:"number",name:"price",id:"price",placeholder:"Set a product price",required:!0}),Object(n.jsx)(ue,{onChange:function(e){return o(e.target.files[0])},type:"file",name:"productImage",id:"productImage",placeholder:"Upload a product image",required:!0}),Object(n.jsx)(ue,{ref:l,type:"text",name:"videoURL",id:"videoURL",placeholder:"Paste a video URL for the product ad",required:!0}),Object(n.jsx)(pe,{style:{width:"260px"},type:"submit",children:"Create Product"})]})})};var vt=function(e){var t=e.user,r=e.updatePassword,s=Object(a.useState)(""),c=Object(p.a)(s,2),o=c[0],i=c[1],d=Object(a.useState)(""),l=Object(p.a)(d,2),u=l[0],b=l[1],j=Object(a.useState)(""),m=Object(p.a)(j,2),h=m[0],f=m[1],x=u===h;return Object(n.jsxs)(le,{style:{width:"340px"},children:[Object(n.jsx)(re.a,{}),Object(n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!x)return re.b.error("Passwords do not match",me);var n={password:t.password,newPassword:u,currentPassword:o};r(e,n)},className:"password-update",children:[Object(n.jsx)(ue,{value:o,type:"password",name:"currentPassword",id:"currentPassword",placeholder:"Enter current password",onChange:function(e){return i(e.target.value)},required:!0}),Object(n.jsx)(ue,{value:u,type:"password",name:"newPassword",id:"newPassword",placeholder:"Enter new password",onChange:function(e){return b(e.target.value)},required:!0}),u&&Object(n.jsxs)(be,{children:[Object(n.jsxs)(je,{children:[/.{8,}/.test(u)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(n.jsxs)(je,{children:[/(?=.*?[A-Z])/.test(u)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(n.jsxs)(je,{children:[/(?=.*?[0-9])/.test(u)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(n.jsxs)(je,{children:[/(?=.*?[#?!@$%^&*-])/.test(u)?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(n.jsx)(ue,{value:h,type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Reenter new password",onChange:function(e){return f(e.target.value)},required:!0}),h&&Object(n.jsx)(be,{style:{height:"auto"},children:Object(n.jsxs)(je,{children:[x?Object(n.jsx)(xe.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(n.jsx)(ge.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:x?"Passwords match":"Passwords do not match"})]})}),Object(n.jsx)(pe,{disabled:!x||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(u),type:"submit",style:{width:"180px"},children:"Update Password"})]})]})},yt=r(38);var wt=function(){var e=O("mobile",!1),t=Object(p.a)(e,2),r=t[0],s=t[1],c=O("progress",0),o=Object(p.a)(c,2),d=o[0],h=o[1],f=Object(a.useState)(0),x=Object(p.a)(f,2),g=x[0],v=x[1],y=Object(yt.b)(),w=Object(yt.c)((function(e){return e})),S=w.user,N=w.orders,z=w.products,I=w.cart;Object(a.useEffect)((function(){var e=I.items?I.items.reduce((function(e,t){return e+t.quantity}),0):0;v(e)}),[I]);var A=Object(b.f)();Object(a.useEffect)((function(){window.addEventListener("load",(function(){te(S.token||"")})),window.addEventListener("resize",(function(){return window.innerWidth<768?s(!0):s(!1)}))})),Object(a.useEffect)((function(){window.innerWidth<768?s(!0):s(!1)}),[s]);var L=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.get("/cart");case 3:t=e.sent,y(X(t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y(Y(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="administrator"===t?"/orders/admin":"/orders",e.prev=1,e.next=4,ee.get(r);case 4:(n=e.sent).data.orders?y($(n.data.orders.reverse())):y($([])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),y(M(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.get("/products");case 3:t=e.sent,y(_(t.data.products.reverse())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y(q(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=Object(j.a)(e),r=t.username,n=t.email,a=t.role,s=t.password,c=t.userId;y(C({username:r,email:n,role:a,password:s,userId:c,token:e}))},D=function(){var e=Object(u.a)(l.a.mark((function e(t,r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(40),t.preventDefault(),y(k()),y(B()),y(F()),y(Z()),e.prev=6,e.next=9,ee.post("/users/signin",r);case 9:n=e.sent,t.target.reset(),h(100),te(n.data.token),E(n.data.token),L(),T(S.role),U(),re.b.success("Successfully logged in!",me),A.push("/apple_shop/home"),e.next=28;break;case 21:e.prev=21,e.t0=e.catch(6),h(100),console.log(e.t0),y(P((a=function(){return e.t0.message.includes("401")?"Email/Password combination incorrect. Try again.":e.t0.message.includes("404")?"User not found.":void 0})())),re.b.error(a(),me);case 28:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(40),t.preventDefault(),e.prev=2,e.next=5,ee.post("/users/signup",r);case 5:e.sent.data&&(re.b.success("Product successfully created",me),U(),A.push("/apple_shop/products")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),h(100),re.b.error(e.t0.message,me);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(F()),e.prev=1,e.next=4,ee.post("/products",r);case 4:e.sent.data&&(re.b.success("Product successfully created",me),U(),A.push("/apple_shop/products")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y(q(e.t0)),re.b.error(e.t0.message,me);case 12:return e.prev=12,t.target.reset(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(l.a.mark((function e(t,r,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(F()),e.prev=1,e.next=4,ee.put("/products/".concat(r),n);case 4:e.sent.data&&(re.b.success("Product successfully updated",me),U(),A.push("/apple_shop/products")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y(q(e.t0)),re.b.error(e.t0.message,me);case 12:return e.prev=12,t.target.reset(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t,r,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(F()),r={productId:t},e.prev=2,e.next=5,ee.delete("/orders/delete",{data:r});case 5:if(!e.sent.data){e.next=11;break}return e.next=9,ee.delete("/products/".concat(t));case 9:e.sent.data&&(re.b.success("Product successfully deleted",me),U(),A.push("/apple_shop/products"));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),y(q(e.t0)),re.b.error(e.t0.message,me);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.put("/users/".concat(S.userId),r);case 3:e.sent.data&&(re.b.success("Password successfully updated",me),A.push("/apple_shop/home")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.message.includes("401")?"Incorrect password. Try again.":e.t0.message,re.b.error(n,me);case 11:return e.prev=11,t.target.reset(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(F()),e.prev=1,e.next=4,ee.put(t);case 4:e.sent.data&&(re.b.success("Product availability successfully updated",me),U(),A.push("/apple_shop/products")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y(q(e.t0)),re.b.error(e.t0.message,me);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(Z()),e.prev=1,e.next=4,ee.post("/cart",t);case 4:e.sent.data&&(re.b.success("Product successfully added to cart",me),L()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y(Y(e.t0)),re.b.error(e.t0.message,me);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.put("/cart/update",t);case 3:e.sent.data&&(re.b.success("Cart successfully updated",me),L()),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),y(Y(e.t0)),re.b.error(e.t0.message,me);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(Z()),e.prev=1,e.next=4,ee.put("/cart/remove",t);case 4:e.sent.data&&(re.b.success("Product successfully removed from cart",me),L()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y(Y(e.t0)),re.b.error(e.t0.message,me);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(B()),y(Z()),e.prev=2,e.next=5,ee.post("/orders");case 5:e.sent.data&&(re.b.success("Order successfully placed",me),T(S.role),L()),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),y(Y(e.t0)),y(M(e.t0)),re.b.error(e.t0.message,me);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(m.a,{color:"blue",progress:d,onLoaderFinished:function(){return h(0)}}),Object(n.jsx)(re.a,{}),S.user.isLoggedIn&&Object(n.jsx)(Qe,{logout:function(){te(""),re.b.dark("Logged out.",me),A.push("/apple_shop"),y(R()),sessionStorage.clear()},getOrders:T,user:S.user,mobile:r,cartCount:g}),Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{exact:!0,path:"/apple_shop",render:function(e){return Object(n.jsx)(fe,Object(i.a)(Object(i.a)({},e),{},{handleLogin:D}))}}),Object(n.jsx)(b.a,{path:"/apple_shop/home",component:ut}),Object(n.jsx)(b.a,{path:"/apple_shop/register",render:function(e){return Object(n.jsx)(ye,Object(i.a)(Object(i.a)({},e),{},{handleRegister:V}))}}),Object(n.jsx)(b.a,{path:"/apple_shop/products",render:function(e){return Object(n.jsx)(qe,Object(i.a)(Object(i.a)({},e),{},{products:z.products,user:S.user,addToCart:Q,deleteProduct:H,updateProductAvailability:K,updateProduct:J,mobile:r}))}}),Object(n.jsx)(b.a,{path:"/apple_shop/orders",render:function(e){return Object(n.jsx)(ot,Object(i.a)(Object(i.a)({},e),{},{orders:N.orders,mobile:r,addToCart:Q}))}}),Object(n.jsx)(b.a,{path:"/apple_shop/cart",render:function(e){return Object(n.jsx)(gt,Object(i.a)(Object(i.a)({},e),{},{updateCart:ne,cart:I,count:g,removeFromCart:ae,placeOrder:se,mobile:r}))}}),Object(n.jsx)(b.a,{path:"/apple_shop/create-product",render:function(e){return Object(n.jsx)(Ot,Object(i.a)(Object(i.a)({},e),{},{addProduct:W}))}}),Object(n.jsx)(b.a,{path:"/apple_shop/password",render:function(e){return Object(n.jsx)(vt,Object(i.a)(Object(i.a)({},e),{},{user:S.user,updatePassword:G}))}})]})]})};r(122);c.a.render(Object(n.jsx)(yt.a,{store:Q,children:Object(n.jsx)(o.a,{children:Object(n.jsx)(wt,{})})}),document.querySelector("#root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.9c723e0f.chunk.js.map