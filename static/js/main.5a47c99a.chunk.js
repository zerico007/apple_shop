(this["webpackJsonpshop-frontend"]=this["webpackJsonpshop-frontend"]||[]).push([[0],{91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n(18),c=n.n(o),s=n(8),i=n(14),d=n(23),l=n.n(d),u=n(39),j=n(4),b=n(7),p=n(19),h=n(40),f="http://localhost:5000",m=n.n(h).a.create({baseURL:"http://localhost:5000/api"});m.interceptors.response.use((function(e){var t,n=m.defaults.headers.common.Authorization&&m.defaults.headers.common.Authorization.split(" ")[1];n&&(1e3*Object(p.a)(n).exp<Date.now()?(console.log("token expired"),e.headers["shop-refreshed-access-token"]&&(t=e.headers["shop-refreshed-access-token"],x(t),localStorage.setItem("token",t),console.info("access token renewed"))):console.info("token still good"));return e}),(function(e){return Promise.reject(e)}));var x=function(e){m.defaults.headers.common.Authorization="Bearer ".concat(e),console.log("Set bearer token, ".concat(e))},g=n(5),O=(n(34),n(2)),v=n(3);function y(){var e=Object(O.a)(["\n        height: 1.5rem;\n        width: fit-content;\n        padding: 3px;\n        display: flex;\n        flex-direction: row;\n    "]);return y=function(){return e},e}function w(){var e=Object(O.a)(["\n        width: 320px;\n        height: 170px;\n        display: flex;\n        flex-direction: column;\n        row-gap: 0.7rem;\n        padding: 10px;\n        margin-top: 5px;\n        margin-bottom: 5px;\n        background: linear-gradient(0.25turn, #cbd0d8, #f4f3ea);\n        border: none;\n        border-radius: 4px;\n    "]);return w=function(){return e},e}function S(){var e=Object(O.a)(['\n        height: 2.5em;\n        font-size: 16px;\n        width: 100px;\n        padding: 5px;\n        margin-top: 10px;\n        margin-bottom: 15px;\n        color: #F4F3EA;\n        background-color: #333D51;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #D3AC2B;\n            color: #212a31;\n            transform: scale(1.1);\n            border: solid 1px #333D51;\n        }\n        outline: none;\n        cursor: pointer;\n        &:active {\n            transform: translateY(4px);\n        }\n        border-radius: 0.4rem;\n        font-family: "Roboto Condensed", sans-serif;\n        font-weight: 700;\n        border: none;\n    ']);return S=function(){return e},e}function P(){var e=Object(O.a)(['\n        height: 1.5em;\n        width: 250px;\n        border-bottom: 2px solid gray;\n        margin-top: 10px;\n        margin-bottom: 10px;\n        padding: 10px;\n        font-family: "Roboto Condensed", sans-serif;\n        font-size: 16px;\n        border-top: none;\n        border-left: none;\n        border-right: none;\n    ']);return P=function(){return e},e}function k(){var e=Object(O.a)(["\n        top: 150px;\n        margin-left: auto;\n        margin-right: auto;\n        position: relative;\n        background: white;\n        width: 300px;\n        border: none;\n        border-radius: 0.3rem;\n        padding: 20px;\n    "]);return k=function(){return e},e}var z=v.a.div(k()),R=v.a.input(P()),C=v.a.button(S()),A=v.a.div(w()),N=v.a.div(y()),L={position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0};function I(){var e=Object(O.a)(['\n        border: none;\n        border-bottom: solid 1px #212a31;\n        outline: none;\n        cursor: pointer;\n        font-family: "Roboto Condensed", sans-serif;\n        background: none;\n        font-size: 16px;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #212a31;\n            color: white;\n            transform: scale(1.2);\n            border: solid 1px white;\n            border-radius: 0.4rem;\n            margin-left: 10px;\n        }\n    ']);return I=function(){return e},e}var U=function(e){var t=e.handleLogin,n=v.a.button(I()),o=Object(a.useRef)(),c=Object(a.useRef)();return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(r.jsxs)("h1",{style:{textAlign:"center"},children:["Welcome to Apple Shop ",Object(r.jsx)("i",{className:"fab fa-apple"})]})}),Object(r.jsxs)(z,{children:[Object(r.jsxs)("form",{onSubmit:function(e){var n={email:o.current.value,password:c.current.value};t(e,n)},children:[Object(r.jsx)(R,{type:"email",name:"email",id:"email",placeholder:"Email address",ref:o}),Object(r.jsx)(R,{type:"password",name:"password",id:"password",placeholder:"Password",ref:c}),Object(r.jsx)("br",{}),Object(r.jsx)(C,{type:"submit",children:"Login"})]}),Object(r.jsxs)("footer",{children:["New user? ",Object(r.jsx)(s.b,{to:"/register",children:Object(r.jsx)(n,{children:"Register here"})})]})]})]})},D=n(95),F=n(96);function E(){var e=Object(O.a)(['\n        border: none;\n        border-bottom: solid 1px black;\n        outline: none;\n        cursor: pointer;\n        font-family: "Roboto Condensed", sans-serif;\n        background: none;\n        font-size: 16px;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #212a31;\n            color: white;\n            transform: scale(1.2);\n            border: solid 1px white;\n            border-radius: 0.4rem;\n        }\n    ']);return E=function(){return e},e}var q=v.a.button(E());var T=function(e){var t=e.handleRegister,n=Object(a.useState)(""),o=Object(j.a)(n,2),c=o[0],i=o[1],d=Object(a.useState)(""),l=Object(j.a)(d,2),u=l[0],b=l[1],p=Object(a.useState)(""),h=Object(j.a)(p,2),f=h[0],m=h[1],x=Object(a.useState)(""),O=Object(j.a)(x,2),v=O[0],y=O[1],w=Object(a.useState)(!1),S=Object(j.a)(w,2),P=S[0],k=S[1],I=Object(a.useState)(!1),U=Object(j.a)(I,2),E=U[0],T=U[1],B=c===v;return Object(a.useEffect)((function(){u&&T(!1),f&&k(!1)})),Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(g.a,{}),Object(r.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(r.jsxs)("h1",{children:["Welcome to Apple Shop ",Object(r.jsx)("i",{className:"fab fa-apple"})]})}),Object(r.jsxs)(z,{style:{top:"60px",width:"340px"},children:[Object(r.jsxs)("form",{onSubmit:function(e,n){B||(g.b.error("Passwords do not match.",L),e.preventDefault()),u||(T(!0),e.preventDefault()),f||(k(!0),e.preventDefault()),f&&u&&B&&t(e,{email:u,password:c,username:f})},children:[Object(r.jsx)(R,{type:"text",name:"username",id:"username",placeholder:"Username",value:f,onChange:function(e){return m(e.target.value)}}),Object(r.jsx)("br",{}),P&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter a username"}),Object(r.jsx)("br",{})]}),Object(r.jsx)(R,{type:"email",name:"email",id:"email",placeholder:"Email address",value:u,onChange:function(e){return b(e.target.value)}}),Object(r.jsx)("br",{}),E&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter an email address"}),Object(r.jsx)("br",{})]}),Object(r.jsx)(R,{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){return i(e.target.value)},value:c}),Object(r.jsx)("br",{}),c&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(N,{children:[/.{8,}/.test(c)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(r.jsxs)(N,{children:[/(?=.*?[A-Z])/.test(c)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(r.jsxs)(N,{children:[/(?=.*?[0-9])/.test(c)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(r.jsxs)(N,{children:[/(?=.*?[#?!@$%^&*-])/.test(c)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(r.jsx)(R,{type:"password",name:"confirm",id:"confirm",placeholder:"Confirm Password",value:v,onChange:function(e){return y(e.target.value)}}),Object(r.jsx)("br",{}),v&&Object(r.jsx)(A,{style:{height:"auto"},children:Object(r.jsxs)(N,{children:[B?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:B?"Passwords match":"Passwords do not match"})]})}),Object(r.jsx)(C,{disabled:!B||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(c),type:"submit",children:"Register"})]}),Object(r.jsx)("footer",{children:Object(r.jsx)(s.b,{to:"/",children:Object(r.jsx)(q,{children:"Log in instead?"})})})]})]})};var B=function(e){var t=e.productId,n=e.toggle,o=e.display,c=e.deleteProduct,s=e.UpdateProductModal,i=Object(a.useRef)();return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(g.a,{}),Object(r.jsx)("div",{className:"modal modal-".concat(t),style:{top:"0px"},children:Object(r.jsxs)("div",{className:"modal-content",children:["order"===o&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("h3",{className:"order-modal",children:"How many would you like to order?"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n("modal");var r=i.current.value;if("0"===r)return g.b.error("Please enter a quantity",L);console.log(t,r);var a={product:t,quantity:r};m.post("/orders/",a).then((function(e){console.log(e.data),g.b.dark(e.data.message,L)})).catch((function(e){console.log(e.message),g.b.error(e.message,L)})),e.target.reset()},children:[Object(r.jsx)(R,{type:"number",name:"quantity",defaultValue:"1",ref:i,style:{textAlign:"center"}}),Object(r.jsx)("br",{}),Object(r.jsx)(C,{type:"submit",style:{width:"130px"},children:"Confirm Order"})]})]}),"delete"===o&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("h3",{className:"delete-modal",children:"Are you sure you want to delete this product?"}),Object(r.jsx)(C,{onClick:function(){return c(t)},style:{width:"120px",alignSelf:"center"},children:"Confirm Delete"})]}),"update"===o&&Object(r.jsx)(a.Fragment,{children:Object(r.jsx)(s,{})}),Object(r.jsx)(C,{style:{alignSelf:"center"},onClick:function(){return n("modal")},children:"Cancel"})]})})]})},M=n(41),V=n.n(M);var W=function(e){var t=e.videoURL,n=e.productId,a=e.showCloseButton,o=e.closeButton,c=e.setMountVideo,s=e.mountVideo,i=e.mobile;return Object(r.jsxs)("div",{className:"video-div video-".concat(n),style:{top:"0px"},children:[Object(r.jsx)(V.a,{className:"video-player",style:{left:i?"0":"25vw"},url:t,playing:s,controls:!1,width:i?"97vw":"600px",height:"500px",pip:!0,playsinline:!0,stopOnUnmount:!0}),o&&Object(r.jsxs)("button",{className:"close-video",onClick:function(){a(),c(!s)},children:["Close ",Object(r.jsx)("i",{className:"far fa-times-circle"})]})]})};function $(){var e=Object(O.a)(["\n        grid-area: price;\n    "]);return $=function(){return e},e}function _(){var e=Object(O.a)(["\n        grid-area: title;\n    "]);return _=function(){return e},e}function J(){var e=Object(O.a)(["\n        grid-area: pic;\n        width: 200px;\n        height: 100%;\n        transition: all 0.5s ease-in-out;\n        &:hover {\n            transform: scale(1.2);\n        }\n    "]);return J=function(){return e},e}function Z(){var e=Object(O.a)(["\n        position: relative;\n        z-index: 3;\n        display: grid;\n        grid-template-areas:\n            'pic title'\n            'pic price'\n            'pic order'\n            'update video'\n            'availability delete';\n        @media (max-width: 768px){\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n        grid-template-columns: 2fr 1fr;\n        grid-template-rows: 1fr 1fr 1fr 1fr;\n        margin: 20px auto 20px auto;\n        padding: 40px;\n        border: none;\n        border-radius: 0.5rem;\n        \n        width: 50vw;\n        height: 100%;\n        background: white;\n        ;\n    "]);return Z=function(){return e},e}var H=v.a.div(Z()),Y=v.a.div(J()),Q=v.a.div(_()),G=v.a.div($());var K=function(e){var t=e.img_url,n=e.price,o=e.title,c=e.id,s=e.videoURL,i=e.user,d=e.deleteProduct,l=e.available,u=e.updateProductAvailability,b=e.mobile,p=e.updateProduct,h=Object(a.useState)(!1),f=Object(j.a)(h,2),m=f[0],x=f[1],g=Object(a.useState)(!1),O=Object(j.a)(g,2),v=O[0],y=O[1],w=Object(a.useState)(""),S=Object(j.a)(w,2),P=S[0],k=S[1],A=Object(a.useState)(),N=Object(j.a)(A,2),L=N[0],I=N[1],U=Object(a.useRef)(),D=Object(a.useRef)(),F=function(){setTimeout((function(){return x(!m)}),1500)},E=function(e){(e=document.querySelector(".".concat(e,"-").concat(c))).classList.toggle("on")},q=function(e){e.preventDefault();var t=new FormData;L&&t.append("productImage",L,L.name),D.current.value!==o&&t.append("newName",D.current.value),U.current.value!==n&&t.append("newPrice",U.current.value);L?p(e,c,t,{headers:{"content-type":"multipart/form-data"}}):p(e,c,t)},T="administrator"===i.role;return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(B,{productId:c,toggle:E,display:P,deleteProduct:d,UpdateProductModal:function(){return Object(r.jsx)(z,{style:{top:"0"},children:Object(r.jsxs)("form",{className:"update-product-form",onSubmit:q,encType:"multipart/form-data",children:[Object(r.jsx)(R,{type:"text",id:"product-title",name:"product-title",ref:D,defaultValue:o}),Object(r.jsx)(R,{type:"number",id:"product-price",name:"product-price",ref:U,defaultValue:n}),Object(r.jsx)(R,{onChange:function(e){return I(e.target.files[0])},type:"file",name:"productImage",id:"productImage"}),Object(r.jsx)(C,{style:{width:"160px"},type:"submit",children:" Confirm Update"})]})})}}),v&&Object(r.jsx)(W,{videoURL:s,toggle:E,productId:c,showCloseButton:F,closeButton:m,mountVideo:v,setMountVideo:y,mobile:b}),Object(r.jsxs)(H,{children:[Object(r.jsx)(Y,{children:t&&Object(r.jsx)("img",{src:t,alt:o,className:"product-img",loading:"lazy"})}),Object(r.jsx)(Q,{children:Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:o})})}),Object(r.jsx)(G,{children:Object(r.jsxs)("strong",{children:["Price: $",(new Intl.NumberFormat).format(n)]})}),Object(r.jsx)(C,{className:l?"add-to-order-btn":"add-to-order-btn out-of-stock",style:{gridArea:"order",width:b?"130px":"100px"},onClick:function(){E("modal"),k("order")},disabled:!l,children:l?"Add to order":"Out of Stock"}),Object(r.jsxs)(C,{style:{gridArea:"video"},onClick:function(){F(),y(!v)},children:["Video ",Object(r.jsx)("i",{className:"fab fa-youtube"})]}),T&&Object(r.jsx)(C,{style:{gridArea:"update",width:"150px",marginLeft:b?"0":"2rem"},onClick:function(){E("modal"),k("update")},children:"Update Product"}),T&&Object(r.jsx)(C,{style:{gridArea:"delete"},onClick:function(){E("modal"),k("delete")},children:"Delete"}),T&&Object(r.jsx)(C,{style:{gridArea:"availability",width:"150px",marginLeft:b?"0":"2rem"},onClick:function(){return function(){var e="/products/".concat(c,l?"/unavailable":"/available");u(e)}()},children:"Update Availability"})]})]})};function X(){var e=Object(O.a)(["\n        width: 75vw;\n        height: 2rem;\n        top: 150px;\n        margin-right: auto;\n        margin-left: auto;\n        margin-top: 20px;\n        margin-bottom: 20px;\n    "]);return X=function(){return e},e}var ee=function(e){var t=e.search,n=e.updateSearch,a=v.a.div(X());return Object(r.jsxs)(a,{children:[Object(r.jsx)(R,{style:{width:"100%",border:"solid 3px #212a31",borderRadius:"0.4rem"},type:"text",name:"search",id:"searchText",placeholder:"Search",value:t,onChange:function(e){return n(e.target.value)},autoFocus:!0}),Object(r.jsx)("i",{style:{float:"right",position:"relative",top:"-43px"},className:"fas fa-search"})]},"searching")};function te(){var e=Object(O.a)(["\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        top: 120px;\n        overflow: hidden;\n        width: 100vw;\n        margin-left: auto;\n        margin-right: auto;\n    "]);return te=function(){return e},e}var ne=v.a.div(te());var re=function(e){var t=e.products,n=e.user,o=e.deleteProduct,c=e.updateProductAvailability,s=e.mobile,i=e.updateProduct,d=Object(a.useState)(""),l=Object(j.a)(d,2),u=l[0],b=l[1];return Object(r.jsxs)(ne,{children:[Object(r.jsx)(ee,{updateSearch:function(e){b(e)},search:u}),""===u&&t.map((function(e,t){return Object(r.jsx)(K,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(f,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,available:e.available,updateProductAvailability:c,updateProduct:i,user:n,deleteProduct:o,mobile:s},t)})),""!==u&&t.map((function(e,t){return e.name.toLowerCase().includes(u.toLowerCase())&&Object(r.jsx)(K,{price:e.price,title:e.name,img_url:e.productImage&&"http://localhost:5000/".concat(e.productImage),id:e.id,videoURL:e.videoURL,user:n},t)}))]})};function ae(){var e=Object(O.a)(["\n        position: absolute;\n        left: 0;\n        padding-left: 40px;\n        padding-top: 10px;\n        top: 80px;\n        display: flex;\n        align-items: flex-start;\n        flex-direction: column;\n        z-index: 100;\n        width: 105vw;\n        background-color: #333D51;\n        height: 100vh;\n    "]);return ae=function(){return e},e}function oe(){var e=Object(O.a)(["\n        \n        position: relative;\n        float: right;\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        width: 75vw;\n        height: 100px;\n        box-sizing: border-box;\n    "]);return oe=function(){return e},e}function ce(){var e=Object(O.a)(["\n        width: ",";\n        height: ",';\n        background-color: #333D51;\n        color: #F4F3EA;\n        font-family: "Roboto Condensed", sans-serif;\n        font-size: ',";\n        outline: none;\n        cursor: pointer;\n        border: none;\n        border-radius: 0.3rem;\n        transition: all 0.5s;\n        &:hover {\n            \n            color: #D3AC2B;\n            transform: scale(1.1)\n        }\n        \n        margin-right: ",";\n        margin-top: ",";\n        text-align: center;\n    "]);return ce=function(){return e},e}function se(){var e=Object(O.a)(["\n        position: fixed;\n        top: 0px;\n        left: 0px;\n        right: 0px;\n        width: 100%;\n        background-color: #333D51;\n        height: 67px;\n        padding: 10px;\n        z-index: 999;\n    "]);return se=function(){return e},e}var ie=v.a.nav(se()),de=v.a.button(ce(),(function(e){return e.mobileSite?"100%":"120px"}),(function(e){return e.mobileSite?"2rem":"60px"}),(function(e){return e.mobileSite?"24px":"16px"}),(function(e){return e.mobileSite?"0":"40px"}),(function(e){return e.mobileSite?"45px":"10px"})),le=v.a.div(oe()),ue=v.a.div(ae());var je=function(e){var t=e.logout,n=e.getOrders,o=e.getAdminOrders,c=e.user,i=e.mobile,d=Object(a.useState)(!1),l=Object(j.a)(d,2),u=l[0],b=l[1],p=Object(a.useState)(!1),h=Object(j.a)(p,2),f=h[0],m=h[1],x="administrator"===c.role;return Object(a.useEffect)((function(){window.addEventListener("scroll",(function(){window.scrollY>0?m(!0):m(!1)}))}),[]),Object(r.jsxs)(ie,{style:{opacity:f?"0.8":"1"},children:[!i&&Object(r.jsx)(s.b,{to:"/home",children:Object(r.jsxs)("div",{className:"title",style:{float:"left",marginLeft:"20px",marginTop:"0px",color:"#F4F3EA",fontSize:"24px"},children:[" ",Object(r.jsx)("i",{className:"fab fa-apple"})," Shop",Object(r.jsxs)("div",{className:"greeting",style:{color:"#F4F3EA",fontSize:"14px",textShadow:"none",marginTop:"10px",zIndex:"101"},children:["Welcome back, ",Object(r.jsx)("em",{children:c.username})]})]})}),!i&&Object(r.jsx)(a.Fragment,{children:Object(r.jsxs)(le,{children:[Object(r.jsx)(s.b,{to:"/orders",children:Object(r.jsx)(de,{onClick:function(){x?o():n()},children:x?"Orders":"My Orders"})}),x&&Object(r.jsx)(s.b,{to:"/create-product",children:Object(r.jsx)(de,{children:"Create a Product"})}),Object(r.jsx)(s.b,{to:"/products",children:Object(r.jsx)(de,{children:"Products"})}),Object(r.jsx)(s.b,{to:"/password",children:Object(r.jsx)(de,{children:"Manage Passwords"})}),Object(r.jsx)(de,{onClick:t,children:"Logout"})]})}),i&&Object(r.jsx)(de,{onClick:function(){return b(!u)},style:{float:"left"},children:u?Object(r.jsx)("i",{className:"fas fa-times fa-2x"}):Object(r.jsx)("i",{className:"fas fa-bars fa-2x"})}),u&&Object(r.jsxs)(ue,{onClick:function(){return i&&b(!u)},children:[Object(r.jsx)(s.b,{to:"/home",children:Object(r.jsx)(de,{mobileSite:!0,children:"Home"})}),Object(r.jsx)(s.b,{to:"/orders",children:Object(r.jsx)(de,{mobileSite:!0,onClick:x?o:n,children:x?"Orders":"My Orders"})}),x&&Object(r.jsx)(s.b,{to:"/create-product",children:Object(r.jsx)(de,{mobileSite:!0,children:"Create a Product"})}),Object(r.jsx)(s.b,{to:"/products",children:Object(r.jsx)(de,{mobileSite:!0,children:"Products"})}),Object(r.jsx)(s.b,{to:"/password",children:Object(r.jsx)(de,{mobileSite:!0,children:"Manage Passwords"})}),Object(r.jsx)("div",{className:"logout",style:{width:"80vw",left:"0",position:"relative",border:"none",borderTop:"1px solid #D3AC2B",display:"flex",alignItems:"flex-start",marginTop:"20vh"},children:Object(r.jsx)(s.b,{to:"/",children:Object(r.jsx)(de,{mobileSite:!0,onClick:t,children:"Logout"})})})]})]})};function be(){var e=Object(O.a)(["\n        grid-area: date;\n        display: flex;\n        justify-content: center;\n        text-align: ",";\n    "]);return be=function(){return e},e}function pe(){var e=Object(O.a)(["\n        border-top: solid 2px #212a31;\n        grid-area: total;\n    "]);return pe=function(){return e},e}function he(){var e=Object(O.a)(["\n        grid-area: quantity;\n    "]);return he=function(){return e},e}function fe(){var e=Object(O.a)(["\n        grid-area: price;\n    "]);return fe=function(){return e},e}function me(){var e=Object(O.a)(["\n        grid-area: title;\n    "]);return me=function(){return e},e}function xe(){var e=Object(O.a)(["\n        grid-area: pic;\n        width: 200px;\n        height: 100%;\n    "]);return xe=function(){return e},e}function ge(){var e=Object(O.a)(["\n        position: relative;\n        z-index: 3;\n        display: grid;\n        grid-template-areas:\n            'user title'\n            'pic price'\n            'pic quantity'\n            'pic total'\n            'pic date';\n        @media (max-width: 768px){\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            \n        }\n        grid-template-columns: 2fr 1fr;\n        grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\n        margin: 20px auto 20px auto;\n        padding: 40px;\n        border: none;\n        border-radius: 0.5rem;\n        width: 40vw;\n        height: 100%;\n        background: white;\n    "]);return ge=function(){return e},e}var Oe=function(e){var t=e.title,n=e.img_url,a=e.price,o=e.total,c=e.quantity,s=e.date,i=e.mobile,d=e.user,l=v.a.div(ge()),u=v.a.div(xe()),j=v.a.div(me()),b=v.a.div(fe()),p=v.a.div(he()),h=v.a.div(pe()),f=v.a.div(be(),i?"center":"left");return Object(r.jsxs)(l,{children:[d&&Object(r.jsxs)("p",{className:"username",style:{gridArea:"user"},children:[Object(r.jsx)("strong",{children:"Username: "}),Object(r.jsx)("em",{children:d})]}),Object(r.jsx)(u,{children:Object(r.jsx)("img",{src:n,alt:t,loading:"lazy",className:"product-img"})}),Object(r.jsx)(j,{children:Object(r.jsx)("strong",{children:t})}),Object(r.jsx)(p,{children:Object(r.jsxs)("strong",{children:["Quantity: ",c]})}),Object(r.jsx)(b,{children:Object(r.jsxs)("strong",{children:["Unit Price: ",a]})}),Object(r.jsx)(h,{children:Object(r.jsxs)("strong",{children:["TOTAL: ",o]})}),Object(r.jsx)(f,{children:Object(r.jsxs)("strong",{children:["Date Order Placed: ",null===s||void 0===s?void 0:s.toString()]})})]})};function ve(){var e=Object(O.a)(["\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        top: 150px;\n        width: 100vw;\n        margin-left: auto;\n        margin-right: auto;\n    "]);return ve=function(){return e},e}var ye=function(e){var t=e.orders,n=e.mobile,a=v.a.div(ve());return Object(r.jsxs)(a,{children:[!t.length&&Object(r.jsx)("h2",{style:{marginLeft:"auto",marginRight:"auto"},children:"No orders placed yet!"}),null===t||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(Oe,{title:e.product,img_url:"".concat(f,"/").concat(e.productImage),price:e.unitPrice,total:e.Total,quantity:e.quantity,user:e.user&&e.user,date:e.dateCreated,mobile:n},t)}))]})},we=n.p+"static/media/apple-products.7abda74a.jpeg";function Se(){var e=Object(O.a)(["\n        position: absolute;\n        top: 68px;\n        height: 100vh;\n        width: 100vw;\n        left: 0;\n        display: flex;\n        background-image: url('","');\n        background-position: center;\n        justify-content: center;\n        align-items: center;\n    "]);return Se=function(){return e},e}function Pe(){var e=Object(O.a)(["\n        width: 50vw;\n        background-color: white;\n        border: none;\n        border-radius: 0.5rem;\n        height: auto;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        color: #212a31;\n        margin-left: auto;\n        margin-right: auto;\n        padding: 40px;\n    "]);return Pe=function(){return e},e}var ke=function(){var e=v.a.div(Pe()),t=v.a.div(Se(),we);return Object(r.jsx)(t,{children:Object(r.jsxs)(e,{children:[Object(r.jsxs)("h1",{className:"welcome",children:["Welcome to the Apple Shop ",Object(r.jsx)("i",{className:"fab fa-apple"}),"!"]}),Object(r.jsx)("h3",{className:"landing",children:"Your one stop shopping experience for all things Apple. We pride ourselves in being a premier supplier of Apple products."}),Object(r.jsx)(s.b,{to:"/products",children:Object(r.jsx)(C,{children:"Browse"})})]})})};var ze=function(e){var t=e.addProduct,n=Object(a.useState)(),o=Object(j.a)(n,2),c=o[0],s=o[1],i=Object(a.useRef)(),d=Object(a.useRef)(),l=Object(a.useRef)();return Object(r.jsx)(z,{children:Object(r.jsxs)("form",{className:"create-product-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("productImage",c,c.name),n.append("name",i.current.value),n.append("price",d.current.value),n.append("videoURL",l.current.value);t(e,n,{headers:{"content-type":"multipart/form-data"}})},children:[Object(r.jsx)(R,{ref:i,type:"text",name:"productName",id:"productName",placeholder:"Enter a product name",required:!0}),Object(r.jsx)(R,{ref:d,type:"number",name:"price",id:"price",placeholder:"Set a product price",required:!0}),Object(r.jsx)(R,{onChange:function(e){return s(e.target.files[0])},type:"file",name:"productImage",id:"productImage",placeholder:"Upload a product image",required:!0}),Object(r.jsx)(R,{ref:l,type:"text",name:"videoURL",id:"videoURL",placeholder:"Paste a video URL for the product ad",required:!0}),Object(r.jsx)(C,{style:{width:"260px"},type:"submit",children:"Create Product"})]})})};var Re=function(e){var t=e.user,n=e.updatePassword,o=Object(a.useState)(""),c=Object(j.a)(o,2),s=c[0],i=c[1],d=Object(a.useState)(""),l=Object(j.a)(d,2),u=l[0],b=l[1],p=Object(a.useState)(""),h=Object(j.a)(p,2),f=h[0],m=h[1],x=u===f;return Object(r.jsxs)(z,{style:{width:"340px"},children:[Object(r.jsx)(g.a,{}),Object(r.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),f!==u)return g.b.error("Passwords do not match",L);var r={password:t.password,newPassword:u,currentPassword:s};n(e,r)},className:"password-update",children:[Object(r.jsx)(R,{value:s,type:"password",name:"currentPassword",id:"currentPassword",placeholder:"Enter current password",onChange:function(e){return i(e.target.value)},required:!0}),Object(r.jsx)(R,{value:u,type:"password",name:"newPassword",id:"newPassword",placeholder:"Enter new password",onChange:function(e){return b(e.target.value)},required:!0}),u&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(N,{children:[/.{8,}/.test(u)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(r.jsxs)(N,{children:[/(?=.*?[A-Z])/.test(u)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(r.jsxs)(N,{children:[/(?=.*?[0-9])/.test(u)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(r.jsxs)(N,{children:[/(?=.*?[#?!@$%^&*-])/.test(u)?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(r.jsx)(R,{value:f,type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Reenter new password",onChange:function(e){return m(e.target.value)},required:!0}),f&&Object(r.jsx)(A,{style:{height:"auto"},children:Object(r.jsxs)(N,{children:[x?Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:x?"Passwords match":"Passwords do not match"})]})}),Object(r.jsx)(C,{disabled:!x||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(u),type:"submit",style:{width:"180px"},children:"Update Password"})]})]})};function Ce(e,t){var n=Object(a.useState)((function(){return JSON.parse(localStorage.getItem(e))||t})),r=Object(j.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){localStorage.setItem(e,JSON.stringify(o))}),[e,o]),[o,c]}var Ae=function(){var e=Ce("products",[]),t=Object(j.a)(e,2),n=t[0],o=t[1],c=Ce("user",{}),s=Object(j.a)(c,2),d=s[0],h=s[1],f=Ce("authenticated",!1),O=Object(j.a)(f,2),v=O[0],y=O[1],w=Ce("orders",[]),S=Object(j.a)(w,2),P=S[0],k=S[1],z=Ce("mobile",!1),R=Object(j.a)(z,2),C=R[0],A=R[1],N=Object(b.f)();Object(a.useEffect)((function(){window.addEventListener("load",(function(){x(localStorage.getItem("token")||"")})),window.addEventListener("resize",(function(){return window.innerWidth<768?A(!0):A(!1)}))})),Object(a.useEffect)((function(){window.innerWidth<768?A(!0):A(!1)}),[A]);var I=function(){m.get("/orders/admin").then((function(e){e.data.orders?k(e.data.orders.reverse()):k([])})).catch((function(e){return console.log(e)}))},D=function(){m.get("/orders").then((function(e){e.data.orders?k(e.data.orders.reverse()):k([])})).catch((function(e){return console.log(e)}))},F=function(){m.get("/products").then((function(e){o(e.data.products.reverse())})).catch((function(e){return console.log(e)}))},E=function(e){var t=Object(p.a)(e),n=t.username,r=t.email,a=t.role,o=t.password,c=t.userId;h({username:n,email:r,role:a,password:o,userId:c})},q=function(e,t){e.preventDefault(),m.post("/users/signin",t).then(function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.target.reset(),t.next=3,localStorage.setItem("token",n.data.token);case 3:return t.next=5,x(n.data.token);case 5:return t.next=7,y(!0);case 7:return t.next=9,E(n.data.token);case 9:F(),"administrator"===d.role?I():D(),g.b.success("Successfully logged in!",L),N.push("/home");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e);g.b.error((function(){return e.message.includes("401")?"Email/Password combination incorrect. Try again.":e.message.includes("404")?"User not found.":void 0}),L)}))},B=function(e,t){e.preventDefault(),m.post("/users/signup",t).then((function(e){console.log(e.data),g.b.success("Account successfully created. Login here.",L),N.push("/")})).catch((function(e){g.b.error(e.message,L)})),console.log(e.target,t)},M=function(e,t){m.post("/products",t).then((function(e){console.log(e.data),g.b.success("Product successfully created",L),F(),N.push("/products")})).catch((function(e){g.b.error(e.message,L)})),e.target.reset()},V=function(e,t,n){m.put("/products/".concat(t),n).then((function(e){console.log(e.data),g.b.success("Product successfully updated",L),F(),N.push("/products")})).catch((function(e){g.b.error(e.message,L)})),e.target.reset()},W=function(e){var t={productId:e};m.delete("/orders/delete",{data:t}).then((function(e){return console.log(e)})),m.delete("/products/".concat(e)).then((function(e){console.log(e.data),g.b.success("Products successfully deleted",L),F(),N.push("/products")})).catch((function(e){g.b.error(e.message,L)}))},$=function(e,t){m.put("/users/".concat(d.userId),t).then((function(e){console.log(e.data),g.b.success("Password updated successfully!",L),N.push("/home")})).catch((function(e){var t=e.message.includes("401")?"Incorrect password. Try again.":e.message;g.b.error(t,L)})),e.target.reset()},_=function(e){console.log(e),m.put(e).then((function(e){console.log(e.data),F(),g.b.success("Order updated successfully",L)})).catch((function(e){console.log(e),g.b.error(e.message,L)}))};return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(g.a,{}),v&&Object(r.jsx)(je,{logout:function(){x(""),y(!1),o([]),localStorage.clear(),g.b.dark("Logged out.",L),N.push("/apple_shop")},getOrders:D,getAdminOrders:I,user:d,mobile:C}),Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{exact:!0,path:"/apple_shop",render:function(e){return Object(r.jsx)(U,Object(i.a)(Object(i.a)({},e),{},{handleLogin:q}))}}),Object(r.jsx)(b.a,{path:"/home",component:ke}),Object(r.jsx)(b.a,{path:"/register",render:function(e){return Object(r.jsx)(T,Object(i.a)(Object(i.a)({},e),{},{handleRegister:B}))}}),Object(r.jsx)(b.a,{path:"/products",render:function(e){return Object(r.jsx)(re,Object(i.a)(Object(i.a)({},e),{},{products:n,user:d,deleteProduct:W,updateProductAvailability:_,updateProduct:V,mobile:C}))}}),Object(r.jsx)(b.a,{path:"/orders",render:function(e){return Object(r.jsx)(ye,Object(i.a)(Object(i.a)({},e),{},{orders:P,mobile:C}))}}),Object(r.jsx)(b.a,{path:"/create-product",render:function(e){return Object(r.jsx)(ze,Object(i.a)(Object(i.a)({},e),{},{addProduct:M}))}}),Object(r.jsx)(b.a,{path:"/password",render:function(e){return Object(r.jsx)(Re,Object(i.a)(Object(i.a)({},e),{},{user:d,updatePassword:$}))}})]})]})};n(91);c.a.render(Object(r.jsx)(s.a,{children:Object(r.jsx)(Ae,{})}),document.querySelector("#root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.5a47c99a.chunk.js.map