(this["webpackJsonpshop-frontend"]=this["webpackJsonpshop-frontend"]||[]).push([[0],{92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n(18),c=n.n(o),s=n(8),i=n(14),d=n(23),l=n.n(d),u=n(39),p=n(4),j=n(7),b=n(19),h=n(40),m=n(41),f="https://apple-shop-backend.herokuapp.com",x=n.n(m).a.create({baseURL:"https://apple-shop-backend.herokuapp.com/api"});x.interceptors.response.use((function(e){var t,n=x.defaults.headers.common.Authorization&&x.defaults.headers.common.Authorization.split(" ")[1];n&&(1e3*Object(b.a)(n).exp<Date.now()?(console.log("token expired"),e.headers["shop-refreshed-access-token"]&&(t=e.headers["shop-refreshed-access-token"],g(t),localStorage.setItem("token",t),console.info("access token renewed"))):console.info("token still good"));return e}),(function(e){return Promise.reject(e)}));var g=function(e){x.defaults.headers.common.Authorization="Bearer ".concat(e),console.log("Set bearer token, ".concat(e))},O=n(5),v=(n(34),n(2)),y=n(3);function w(){var e=Object(v.a)(["\n        height: 1.5rem;\n        width: fit-content;\n        padding: 3px;\n        display: flex;\n        flex-direction: row;\n    "]);return w=function(){return e},e}function S(){var e=Object(v.a)(["\n        width: 320px;\n        height: 170px;\n        display: flex;\n        flex-direction: column;\n        row-gap: 0.7rem;\n        padding: 10px;\n        margin-top: 5px;\n        margin-bottom: 5px;\n        background: linear-gradient(0.25turn, #cbd0d8, #f4f3ea);\n        border: none;\n        border-radius: 4px;\n    "]);return S=function(){return e},e}function P(){var e=Object(v.a)(['\n        height: 2.5em;\n        font-size: 16px;\n        width: 100px;\n        padding: 5px;\n        margin-top: 10px;\n        margin-bottom: 15px;\n        color: #F4F3EA;\n        background-color: #333D51;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #D3AC2B;\n            color: #212a31;\n            transform: scale(1.1);\n            border: solid 1px #333D51;\n        }\n        outline: none;\n        cursor: pointer;\n        &:active {\n            transform: translateY(4px);\n        }\n        border-radius: 0.4rem;\n        font-family: "Roboto Condensed", sans-serif;\n        font-weight: 700;\n        border: none;\n    ']);return P=function(){return e},e}function k(){var e=Object(v.a)(['\n        height: 1.5em;\n        width: 250px;\n        border-bottom: 2px solid gray;\n        margin-top: 10px;\n        margin-bottom: 10px;\n        padding: 10px;\n        font-family: "Roboto Condensed", sans-serif;\n        font-size: 16px;\n        border-top: none;\n        border-left: none;\n        border-right: none;\n    ']);return k=function(){return e},e}function z(){var e=Object(v.a)(["\n        top: 150px;\n        margin-left: auto;\n        margin-right: auto;\n        position: relative;\n        background: white;\n        width: 300px;\n        border: none;\n        border-radius: 0.3rem;\n        padding: 20px;\n    "]);return z=function(){return e},e}var R=y.a.div(z()),C=y.a.input(k()),N=y.a.button(P()),A=y.a.div(S()),_=y.a.div(w()),L={position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0};function I(){var e=Object(v.a)(['\n        border: none;\n        border-bottom: solid 1px #212a31;\n        outline: none;\n        cursor: pointer;\n        font-family: "Roboto Condensed", sans-serif;\n        background: none;\n        font-size: 16px;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #212a31;\n            color: white;\n            transform: scale(1.2);\n            border: solid 1px white;\n            border-radius: 0.4rem;\n            margin-left: 10px;\n        }\n    ']);return I=function(){return e},e}var U=function(e){var t=e.handleLogin,n=y.a.button(I()),o=Object(a.useRef)(),c=Object(a.useRef)();return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(r.jsxs)("h1",{style:{textAlign:"center"},children:["Welcome to Apple Shop ",Object(r.jsx)("i",{className:"fab fa-apple"})]})}),Object(r.jsxs)(R,{children:[Object(r.jsxs)("form",{onSubmit:function(e){var n={email:o.current.value,password:c.current.value};t(e,n)},children:[Object(r.jsx)(C,{type:"email",name:"email",id:"email",placeholder:"Email address",ref:o}),Object(r.jsx)(C,{type:"password",name:"password",id:"password",placeholder:"Password",ref:c}),Object(r.jsx)("br",{}),Object(r.jsx)(N,{type:"submit",children:"Login"})]}),Object(r.jsxs)("footer",{children:["New user? ",Object(r.jsx)(s.b,{to:"/apple_shop/register",children:Object(r.jsx)(n,{children:"Register here"})})]})]})]})},F=n(96),D=n(97);function q(){var e=Object(v.a)(['\n        border: none;\n        border-bottom: solid 1px black;\n        outline: none;\n        cursor: pointer;\n        font-family: "Roboto Condensed", sans-serif;\n        background: none;\n        font-size: 16px;\n        transition: all 0.3s;\n        &:hover {\n            background-color: #212a31;\n            color: white;\n            transform: scale(1.2);\n            border: solid 1px white;\n            border-radius: 0.4rem;\n        }\n    ']);return q=function(){return e},e}var E=y.a.button(q());var T=function(e){var t=e.handleRegister,n=Object(a.useState)(""),o=Object(p.a)(n,2),c=o[0],i=o[1],d=Object(a.useState)(""),l=Object(p.a)(d,2),u=l[0],j=l[1],b=Object(a.useState)(""),h=Object(p.a)(b,2),m=h[0],f=h[1],x=Object(a.useState)(""),g=Object(p.a)(x,2),v=g[0],y=g[1],w=Object(a.useState)(!1),S=Object(p.a)(w,2),P=S[0],k=S[1],z=Object(a.useState)(!1),I=Object(p.a)(z,2),U=I[0],q=I[1],T=c===v;return Object(a.useEffect)((function(){u&&q(!1),m&&k(!1)})),Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(O.a,{}),Object(r.jsx)("div",{className:"header",style:{display:"flex",justifyContent:"center",fontSize:"24px"},children:Object(r.jsxs)("h1",{children:["Welcome to Apple Shop ",Object(r.jsx)("i",{className:"fab fa-apple"})]})}),Object(r.jsxs)(R,{style:{top:"60px",width:"340px"},children:[Object(r.jsxs)("form",{onSubmit:function(e,n){T||(O.b.error("Passwords do not match.",L),e.preventDefault()),u||(q(!0),e.preventDefault()),m||(k(!0),e.preventDefault()),m&&u&&T&&t(e,{email:u,password:c,username:m})},children:[Object(r.jsx)(C,{type:"text",name:"username",id:"username",placeholder:"Username",value:m,onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("br",{}),P&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter a username"}),Object(r.jsx)("br",{})]}),Object(r.jsx)(C,{type:"email",name:"email",id:"email",placeholder:"Email address",value:u,onChange:function(e){return j(e.target.value)}}),Object(r.jsx)("br",{}),U&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{style:{fontSize:"14px",color:"red"},children:"Please enter an email address"}),Object(r.jsx)("br",{})]}),Object(r.jsx)(C,{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){return i(e.target.value)},value:c}),Object(r.jsx)("br",{}),c&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(_,{children:[/.{8,}/.test(c)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(r.jsxs)(_,{children:[/(?=.*?[A-Z])/.test(c)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(r.jsxs)(_,{children:[/(?=.*?[0-9])/.test(c)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(r.jsxs)(_,{children:[/(?=.*?[#?!@$%^&*-])/.test(c)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(r.jsx)(C,{type:"password",name:"confirm",id:"confirm",placeholder:"Confirm Password",value:v,onChange:function(e){return y(e.target.value)}}),Object(r.jsx)("br",{}),v&&Object(r.jsx)(A,{style:{height:"auto"},children:Object(r.jsxs)(_,{children:[T?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:T?"Passwords match":"Passwords do not match"})]})}),Object(r.jsx)(N,{disabled:!T||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(c),type:"submit",children:"Register"})]}),Object(r.jsx)("footer",{children:Object(r.jsx)(s.b,{to:"/apple_shop",children:Object(r.jsx)(E,{children:"Log in instead?"})})})]})]})};var B=function(e){var t=e.productId,n=e.toggle,o=e.display,c=e.deleteProduct,s=e.UpdateProductModal,i=Object(a.useRef)();return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(O.a,{}),Object(r.jsx)("div",{className:"modal modal-".concat(t),style:{top:"0px"},children:Object(r.jsxs)("div",{className:"modal-content",children:["order"===o&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("h3",{className:"order-modal",children:"How many would you like to order?"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n("modal");var r=i.current.value;if("0"===r)return O.b.error("Please enter a quantity",L);console.log(t,r);var a={product:t,quantity:r};x.post("/orders/",a).then((function(e){console.log(e.data),O.b.dark(e.data.message,L)})).catch((function(e){console.log(e.message),O.b.error(e.message,L)})),e.target.reset()},children:[Object(r.jsx)(C,{type:"number",name:"quantity",defaultValue:"1",ref:i,style:{textAlign:"center"}}),Object(r.jsx)("br",{}),Object(r.jsx)(N,{type:"submit",style:{width:"130px"},children:"Confirm Order"})]})]}),"delete"===o&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("h3",{className:"delete-modal",children:"Are you sure you want to delete this product?"}),Object(r.jsx)(N,{onClick:function(){return c(t)},style:{width:"120px",alignSelf:"center"},children:"Confirm Delete"})]}),"update"===o&&Object(r.jsx)(a.Fragment,{children:Object(r.jsx)(s,{})}),Object(r.jsx)(N,{style:{alignSelf:"center"},onClick:function(){return n("modal")},children:"Cancel"})]})})]})},M=n(42),V=n.n(M);var W=function(e){var t=e.videoURL,n=e.productId,a=e.showCloseButton,o=e.closeButton,c=e.setMountVideo,s=e.mountVideo,i=e.mobile;return Object(r.jsxs)("div",{className:"video-div video-".concat(n),style:{top:"0px"},children:[Object(r.jsx)(V.a,{className:"video-player",style:{left:i?"0":"25vw"},url:t,playing:s,controls:!1,width:i?"97vw":"600px",height:"500px",pip:!0,playsinline:!0,stopOnUnmount:!0}),o&&Object(r.jsxs)("button",{className:"close-video",onClick:function(){a(),c(!s)},children:["Close ",Object(r.jsx)("i",{className:"far fa-times-circle"})]})]})};function $(){var e=Object(v.a)(["\n  grid-area: price;\n"]);return $=function(){return e},e}function J(){var e=Object(v.a)(["\n  grid-area: title;\n"]);return J=function(){return e},e}function Z(){var e=Object(v.a)(["\n  grid-area: pic;\n  width: 200px;\n  height: 100%;\n  transition: all 0.5s ease-in-out;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]);return Z=function(){return e},e}function H(){var e=Object(v.a)(['\n  position: relative;\n  z-index: 3;\n  display: grid;\n  grid-template-areas:\n    "pic title"\n    "pic price"\n    "pic order"\n    "update video"\n    "availability delete";\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  grid-template-columns: 2fr 1fr;\n  grid-template-rows: 1fr 1fr 1fr 1fr;\n  margin: 20px auto 20px auto;\n  padding: 40px;\n  border: none;\n  border-radius: 0.5rem;\n\n  width: 50vw;\n  height: 100%;\n  background: white; ;\n']);return H=function(){return e},e}var Y=y.a.div(H()),Q=y.a.div(Z()),G=y.a.div(J()),K=y.a.div($());var X=function(e){var t=e.img_url,n=e.price,o=e.title,c=e.id,s=e.videoURL,i=e.user,d=e.deleteProduct,l=e.available,u=e.updateProductAvailability,j=e.mobile,b=e.updateProduct,h=Object(a.useState)(!1),m=Object(p.a)(h,2),f=m[0],x=m[1],g=Object(a.useState)(!1),O=Object(p.a)(g,2),v=O[0],y=O[1],w=Object(a.useState)(""),S=Object(p.a)(w,2),P=S[0],k=S[1],z=Object(a.useState)(),A=Object(p.a)(z,2),_=A[0],L=A[1],I=Object(a.useRef)(),U=Object(a.useRef)(),F=function(){setTimeout((function(){return x(!f)}),1500)},D=function(e){(e=document.querySelector(".".concat(e,"-").concat(c))).classList.toggle("on")},q=function(e){e.preventDefault();var t=new FormData;_&&t.append("productImage",_,_.name),U.current.value!==o&&t.append("newName",U.current.value),I.current.value!==n&&t.append("newPrice",I.current.value);D("modal"),k(""),_?b(e,c,t,{headers:{"content-type":"multipart/form-data"}}):b(e,c,t)},E="administrator"===i.role;return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(B,{productId:c,toggle:D,display:P,deleteProduct:d,UpdateProductModal:function(){return Object(r.jsx)(R,{style:{top:"0"},children:Object(r.jsxs)("form",{className:"update-product-form",onSubmit:q,encType:"multipart/form-data",children:[Object(r.jsx)(C,{type:"text",id:"product-title",name:"product-title",ref:U,defaultValue:o}),Object(r.jsx)(C,{type:"number",id:"product-price",name:"product-price",ref:I,defaultValue:n}),Object(r.jsx)(C,{onChange:function(e){return L(e.target.files[0])},type:"file",name:"productImage",id:"productImage"}),Object(r.jsxs)(N,{style:{width:"160px"},type:"submit",children:[" ","Confirm Update"]})]})})}}),v&&Object(r.jsx)(W,{videoURL:s,toggle:D,productId:c,showCloseButton:F,closeButton:f,mountVideo:v,setMountVideo:y,mobile:j}),Object(r.jsxs)(Y,{children:[Object(r.jsx)(Q,{children:t&&Object(r.jsx)("img",{src:t,alt:o,className:"product-img",loading:"lazy"})}),Object(r.jsx)(G,{children:Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:o})})}),Object(r.jsx)(K,{children:Object(r.jsxs)("strong",{children:["Price: $",(new Intl.NumberFormat).format(n)]})}),Object(r.jsx)(N,{className:l?"add-to-order-btn":"add-to-order-btn out-of-stock",style:{gridArea:"order",width:j?"130px":"100px"},onClick:function(){D("modal"),k("order")},disabled:!l,children:l?"Add to order":"Out of Stock"}),Object(r.jsxs)(N,{style:{gridArea:"video"},onClick:function(){F(),y(!v)},children:["Video ",Object(r.jsx)("i",{className:"fab fa-youtube"})]}),E&&Object(r.jsx)(N,{style:{gridArea:"update",width:"150px",marginLeft:j?"0":"2rem"},onClick:function(){D("modal"),k("update")},children:"Update Product"}),E&&Object(r.jsx)(N,{style:{gridArea:"delete"},onClick:function(){D("modal"),k("delete")},children:"Delete"}),E&&Object(r.jsx)(N,{style:{gridArea:"availability",width:"150px",marginLeft:j?"0":"2rem"},onClick:function(){return function(){var e="/products/".concat(c,l?"/unavailable":"/available");u(e)}()},children:"Update Availability"})]})]})};function ee(){var e=Object(v.a)(["\n        width: 75vw;\n        height: 2rem;\n        top: 150px;\n        margin-right: auto;\n        margin-left: auto;\n        margin-top: 20px;\n        margin-bottom: 20px;\n    "]);return ee=function(){return e},e}var te=function(e){var t=e.search,n=e.updateSearch,a=y.a.div(ee());return Object(r.jsxs)(a,{children:[Object(r.jsx)(C,{style:{width:"100%",border:"solid 3px #212a31",borderRadius:"0.4rem"},type:"text",name:"search",id:"searchText",placeholder:"Search",value:t,onChange:function(e){return n(e.target.value)},autoFocus:!0}),Object(r.jsx)("i",{style:{float:"right",position:"relative",top:"-43px"},className:"fas fa-search"})]},"searching")};function ne(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  top: 120px;\n  overflow: hidden;\n  width: 100vw;\n  margin-left: auto;\n  margin-right: auto;\n"]);return ne=function(){return e},e}var re=y.a.div(ne());var ae=function(e){var t=e.products,n=e.user,o=e.deleteProduct,c=e.updateProductAvailability,s=e.mobile,i=e.updateProduct,d=Object(a.useState)(""),l=Object(p.a)(d,2),u=l[0],j=l[1];return Object(r.jsxs)(re,{children:[Object(r.jsx)(te,{updateSearch:function(e){j(e)},search:u}),""===u&&t.map((function(e,t){return Object(r.jsx)(X,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(f,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,available:e.available,updateProductAvailability:c,updateProduct:i,user:n,deleteProduct:o,mobile:s},t)})),""!==u&&t.map((function(e,t){return e.name.toLowerCase().includes(u.toLowerCase())&&Object(r.jsx)(X,{price:e.price,title:e.name,img_url:e.productImage&&"".concat(f,"/").concat(e.productImage),id:e.id,videoURL:e.videoURL,user:n},t)}))]})},oe=n.p+"static/media/apple_shop_wave.a2b3e177.svg";function ce(){var e=Object(v.a)(['\n  position: absolute;\n  left: 0;\n  padding-left: 40px;\n  padding-top: 10px;\n  top: 80px;\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  z-index: 100;\n  width: 105vw;\n  animation: enterTopRight 1s;\n  transform-origin: 0% 0%;\n  background-image: url("','");\n  height: 100vh;\n']);return ce=function(){return e},e}function se(){var e=Object(v.a)(["\n  position: relative;\n  float: right;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  width: 75vw;\n  height: 100px;\n  box-sizing: border-box;\n"]);return se=function(){return e},e}function ie(){var e=Object(v.a)(["\n  width: ",";\n  height: ",';\n  background-color: #333d51;\n  color: #f4f3ea;\n  font-family: "Roboto Condensed", sans-serif;\n  font-size: ',";\n  outline: none;\n  cursor: pointer;\n  border: none;\n  border-radius: 0.3rem;\n  transition: all 0.5s;\n  &:hover {\n    color: #d3ac2b;\n    transform: scale(1.1);\n  }\n\n  margin-right: ",";\n  margin-top: ",";\n  text-align: center;\n"]);return ie=function(){return e},e}function de(){var e=Object(v.a)(["\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100%;\n  background-color: #333d51;\n  height: 67px;\n  padding: 10px;\n  z-index: 999;\n"]);return de=function(){return e},e}var le=y.a.nav(de()),ue=y.a.button(ie(),(function(e){return e.mobileSite?"100%":"120px"}),(function(e){return e.mobileSite?"2rem":"60px"}),(function(e){return e.mobileSite?"24px":"16px"}),(function(e){return e.mobileSite?"0":"40px"}),(function(e){return e.mobileSite?"45px":"10px"})),pe=y.a.div(se()),je=y.a.div(ce(),oe);var be=function(e){var t=e.logout,n=e.getOrders,o=e.getAdminOrders,c=e.user,i=e.mobile,d=Object(a.useState)(!1),l=Object(p.a)(d,2),u=l[0],j=l[1],b=Object(a.useState)(!1),h=Object(p.a)(b,2),m=h[0],f=h[1],x="administrator"===c.role;return Object(a.useEffect)((function(){window.addEventListener("scroll",(function(){window.scrollY>0?f(!0):f(!1)}))}),[]),Object(r.jsxs)(le,{style:{opacity:m?"0.8":"1"},children:[!i&&Object(r.jsx)(s.b,{to:"/apple_shop/home",children:Object(r.jsxs)("div",{className:"title",style:{float:"left",marginLeft:"20px",marginTop:"0px",color:"#F4F3EA",fontSize:"24px"},children:[" ",Object(r.jsx)("i",{className:"fab fa-apple"})," Shop",Object(r.jsxs)("div",{className:"greeting",style:{color:"#F4F3EA",fontSize:"14px",textShadow:"none",marginTop:"10px",zIndex:"101"},children:["Welcome back, ",Object(r.jsx)("em",{children:c.username})]})]})}),!i&&Object(r.jsx)(a.Fragment,{children:Object(r.jsxs)(pe,{children:[Object(r.jsx)(s.b,{to:"/apple_shop/orders",children:Object(r.jsx)(ue,{onClick:function(){x?o():n()},children:x?"Orders":"My Orders"})}),x&&Object(r.jsx)(s.b,{to:"/apple_shop/create-product",children:Object(r.jsx)(ue,{children:"Create a Product"})}),Object(r.jsx)(s.b,{to:"/apple_shop/products",children:Object(r.jsx)(ue,{children:"Products"})}),Object(r.jsx)(s.b,{to:"/apple_shop/password",children:Object(r.jsx)(ue,{children:"Manage Passwords"})}),Object(r.jsx)(ue,{onClick:t,children:"Logout"})]})}),i&&Object(r.jsx)(ue,{onClick:function(){return j(!u)},style:{float:"left"},children:u?Object(r.jsx)("i",{className:"fas fa-times fa-2x"}):Object(r.jsx)("i",{className:"fas fa-bars fa-2x"})}),u&&Object(r.jsxs)(je,{onClick:function(){return i&&j(!u)},children:[Object(r.jsx)(s.b,{to:"/apple_shop/home",children:Object(r.jsx)(ue,{mobileSite:!0,children:"Home"})}),Object(r.jsx)(s.b,{to:"/apple_shop/orders",children:Object(r.jsx)(ue,{mobileSite:!0,onClick:x?o:n,children:x?"Orders":"My Orders"})}),x&&Object(r.jsx)(s.b,{to:"/apple_shop/create-product",children:Object(r.jsx)(ue,{mobileSite:!0,children:"Create a Product"})}),Object(r.jsx)(s.b,{to:"/apple_shop/products",children:Object(r.jsx)(ue,{mobileSite:!0,children:"Products"})}),Object(r.jsx)(s.b,{to:"/apple_shop/password",children:Object(r.jsx)(ue,{mobileSite:!0,children:"Manage Passwords"})}),Object(r.jsx)("div",{className:"logout",style:{width:"80vw",left:"0",position:"relative",border:"none",display:"flex",alignItems:"flex-start",marginTop:"10vh"},children:Object(r.jsx)(s.b,{to:"/",children:Object(r.jsx)(ue,{style:{background:"none",color:"#333d51"},mobileSite:!0,onClick:t,children:"Logout"})})})]})]})};function he(){var e=Object(v.a)(["\n        grid-area: date;\n        display: flex;\n        justify-content: center;\n        text-align: ",";\n    "]);return he=function(){return e},e}function me(){var e=Object(v.a)(["\n        border-top: solid 2px #212a31;\n        grid-area: total;\n    "]);return me=function(){return e},e}function fe(){var e=Object(v.a)(["\n        grid-area: quantity;\n    "]);return fe=function(){return e},e}function xe(){var e=Object(v.a)(["\n        grid-area: price;\n    "]);return xe=function(){return e},e}function ge(){var e=Object(v.a)(["\n        grid-area: title;\n    "]);return ge=function(){return e},e}function Oe(){var e=Object(v.a)(["\n        grid-area: pic;\n        width: 200px;\n        height: 100%;\n    "]);return Oe=function(){return e},e}function ve(){var e=Object(v.a)(["\n        position: relative;\n        z-index: 3;\n        display: grid;\n        grid-template-areas:\n            'user title'\n            'pic price'\n            'pic quantity'\n            'pic total'\n            'pic date';\n        @media (max-width: 768px){\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            \n        }\n        grid-template-columns: 2fr 1fr;\n        grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\n        margin: 20px auto 20px auto;\n        padding: 40px;\n        border: none;\n        border-radius: 0.5rem;\n        width: 40vw;\n        height: 100%;\n        background: white;\n    "]);return ve=function(){return e},e}var ye=function(e){var t=e.title,n=e.img_url,a=e.price,o=e.total,c=e.quantity,s=e.date,i=e.mobile,d=e.user,l=y.a.div(ve()),u=y.a.div(Oe()),p=y.a.div(ge()),j=y.a.div(xe()),b=y.a.div(fe()),h=y.a.div(me()),m=y.a.div(he(),i?"center":"left");return Object(r.jsxs)(l,{children:[d&&Object(r.jsxs)("p",{className:"username",style:{gridArea:"user"},children:[Object(r.jsx)("strong",{children:"Username: "}),Object(r.jsx)("em",{children:d})]}),Object(r.jsx)(u,{children:Object(r.jsx)("img",{src:n,alt:t,loading:"lazy",className:"product-img"})}),Object(r.jsx)(p,{children:Object(r.jsx)("strong",{children:t})}),Object(r.jsx)(b,{children:Object(r.jsxs)("strong",{children:["Quantity: ",c]})}),Object(r.jsx)(j,{children:Object(r.jsxs)("strong",{children:["Unit Price: ",a]})}),Object(r.jsx)(h,{children:Object(r.jsxs)("strong",{children:["TOTAL: ",o]})}),Object(r.jsx)(m,{children:Object(r.jsxs)("strong",{children:["Date Order Placed: ",null===s||void 0===s?void 0:s.toString()]})})]})};function we(){var e=Object(v.a)(["\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        top: 150px;\n        width: 100vw;\n        margin-left: auto;\n        margin-right: auto;\n    "]);return we=function(){return e},e}var Se=function(e){var t=e.orders,n=e.mobile,a=y.a.div(we());return Object(r.jsxs)(a,{children:[!t.length&&Object(r.jsx)("h2",{style:{marginLeft:"auto",marginRight:"auto"},children:"No orders placed yet!"}),null===t||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(ye,{title:e.product,img_url:"".concat(f,"/").concat(e.productImage),price:e.unitPrice,total:e.Total,quantity:e.quantity,user:e.user&&e.user,date:e.dateCreated,mobile:n},t)}))]})},Pe=n.p+"static/media/apple-products.7abda74a.jpeg";function ke(){var e=Object(v.a)(["\n        position: absolute;\n        top: 68px;\n        height: 100vh;\n        width: 100vw;\n        left: 0;\n        display: flex;\n        background-image: url('","');\n        background-position: center;\n        justify-content: center;\n        align-items: center;\n    "]);return ke=function(){return e},e}function ze(){var e=Object(v.a)(["\n        width: 50vw;\n        background-color: white;\n        border: none;\n        border-radius: 0.5rem;\n        height: auto;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        color: #212a31;\n        margin-left: auto;\n        margin-right: auto;\n        padding: 40px;\n    "]);return ze=function(){return e},e}var Re=function(){var e=y.a.div(ze()),t=y.a.div(ke(),Pe);return Object(r.jsx)(t,{children:Object(r.jsxs)(e,{children:[Object(r.jsxs)("h1",{className:"welcome",children:["Welcome to the Apple Shop ",Object(r.jsx)("i",{className:"fab fa-apple"}),"!"]}),Object(r.jsx)("h3",{className:"landing",children:"Your one stop shopping experience for all things Apple. We pride ourselves in being a premier supplier of Apple products."}),Object(r.jsx)(s.b,{to:"/apple_shop/products",children:Object(r.jsx)(N,{children:"Browse"})})]})})};var Ce=function(e){var t=e.addProduct,n=Object(a.useState)(),o=Object(p.a)(n,2),c=o[0],s=o[1],i=Object(a.useRef)(),d=Object(a.useRef)(),l=Object(a.useRef)();return Object(r.jsx)(R,{children:Object(r.jsxs)("form",{className:"create-product-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("productImage",c,c.name),n.append("name",i.current.value),n.append("price",d.current.value),n.append("videoURL",l.current.value);t(e,n,{headers:{"content-type":"multipart/form-data"}})},children:[Object(r.jsx)(C,{ref:i,type:"text",name:"productName",id:"productName",placeholder:"Enter a product name",required:!0}),Object(r.jsx)(C,{ref:d,type:"number",name:"price",id:"price",placeholder:"Set a product price",required:!0}),Object(r.jsx)(C,{onChange:function(e){return s(e.target.files[0])},type:"file",name:"productImage",id:"productImage",placeholder:"Upload a product image",required:!0}),Object(r.jsx)(C,{ref:l,type:"text",name:"videoURL",id:"videoURL",placeholder:"Paste a video URL for the product ad",required:!0}),Object(r.jsx)(N,{style:{width:"260px"},type:"submit",children:"Create Product"})]})})};var Ne=function(e){var t=e.user,n=e.updatePassword,o=Object(a.useState)(""),c=Object(p.a)(o,2),s=c[0],i=c[1],d=Object(a.useState)(""),l=Object(p.a)(d,2),u=l[0],j=l[1],b=Object(a.useState)(""),h=Object(p.a)(b,2),m=h[0],f=h[1],x=u===m;return Object(r.jsxs)(R,{style:{width:"340px"},children:[Object(r.jsx)(O.a,{}),Object(r.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!x)return O.b.error("Passwords do not match",L);var r={password:t.password,newPassword:u,currentPassword:s};n(e,r)},className:"password-update",children:[Object(r.jsx)(C,{value:s,type:"password",name:"currentPassword",id:"currentPassword",placeholder:"Enter current password",onChange:function(e){return i(e.target.value)},required:!0}),Object(r.jsx)(C,{value:u,type:"password",name:"newPassword",id:"newPassword",placeholder:"Enter new password",onChange:function(e){return j(e.target.value)},required:!0}),u&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(_,{children:[/.{8,}/.test(u)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast 8 characters"})]}),Object(r.jsxs)(_,{children:[/(?=.*?[A-Z])/.test(u)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one uppercase"})]}),Object(r.jsxs)(_,{children:[/(?=.*?[0-9])/.test(u)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one digit"})]}),Object(r.jsxs)(_,{children:[/(?=.*?[#?!@$%^&*-])/.test(u)?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:"Password must contain atleast one special character"})]})]}),Object(r.jsx)(C,{value:m,type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Reenter new password",onChange:function(e){return f(e.target.value)},required:!0}),m&&Object(r.jsx)(A,{style:{height:"auto"},children:Object(r.jsxs)(_,{children:[x?Object(r.jsx)(F.a,{size:20,style:{marginRight:"0.5rem",color:"green"}}):Object(r.jsx)(D.a,{size:20,style:{marginRight:"0.5rem",color:"red"}}),Object(r.jsx)("span",{style:{fontSize:"14px"},children:x?"Passwords match":"Passwords do not match"})]})}),Object(r.jsx)(N,{disabled:!x||!/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.test(u),type:"submit",style:{width:"180px"},children:"Update Password"})]})]})};function Ae(e,t){var n=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem(e))||t})),r=Object(p.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){sessionStorage.setItem(e,JSON.stringify(o))}),[e,o]),[o,c]}var _e=function(){var e=Ae("products",[]),t=Object(p.a)(e,2),n=t[0],o=t[1],c=Ae("user",{}),s=Object(p.a)(c,2),d=s[0],m=s[1],f=Ae("authenticated",!1),v=Object(p.a)(f,2),y=v[0],w=v[1],S=Ae("orders",[]),P=Object(p.a)(S,2),k=P[0],z=P[1],R=Ae("mobile",!1),C=Object(p.a)(R,2),N=C[0],A=C[1],_=Ae("progress",0),I=Object(p.a)(_,2),F=I[0],D=I[1],q=Object(j.f)();Object(a.useEffect)((function(){window.addEventListener("load",(function(){g(localStorage.getItem("token")||"")})),window.addEventListener("resize",(function(){return window.innerWidth<768?A(!0):A(!1)}))})),Object(a.useEffect)((function(){window.innerWidth<768?A(!0):A(!1)}),[A]);var E=function(){x.get("/orders/admin").then((function(e){e.data.orders?z(e.data.orders.reverse()):z([])})).catch((function(e){return console.log(e)}))},B=function(){x.get("/orders").then((function(e){e.data.orders?z(e.data.orders.reverse()):z([])})).catch((function(e){return console.log(e)}))},M=function(){x.get("/products").then((function(e){o(e.data.products.reverse())})).catch((function(e){return console.log(e)}))},V=function(e){var t=Object(b.a)(e),n=t.username,r=t.email,a=t.role,o=t.password,c=t.userId;m({username:n,email:r,role:a,password:o,userId:c})},W=function(e,t){D(40),e.preventDefault(),x.post("/users/signin",t).then(function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.target.reset(),D(100),t.next=4,localStorage.setItem("token",n.data.token);case 4:return t.next=6,g(n.data.token);case 6:return t.next=8,w(!0);case 8:return t.next=10,V(n.data.token);case 10:M(),"administrator"===d.role?E():B(),O.b.success("Successfully logged in!",L),q.push("/apple_shop/home");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){D(100),console.log(e);O.b.error((function(){return e.message.includes("401")?"Email/Password combination incorrect. Try again.":e.message.includes("404")?"User not found.":void 0}),L)}))},$=function(e,t){D(40),e.preventDefault(),x.post("/users/signup",t).then((function(e){D(100),console.log(e.data),O.b.success("Account successfully created. Login here.",L),q.push("/apple_shop")})).catch((function(e){D(100),O.b.error(e.message,L)}))},J=function(e,t){x.post("/products",t).then((function(e){console.log(e.data),O.b.success("Product successfully created",L),M(),q.push("/apple_shop/products")})).catch((function(e){O.b.error(e.message,L)})),e.target.reset()},Z=function(e,t,n){x.put("/products/".concat(t),n).then((function(e){console.log(e.data),O.b.success("Product successfully updated",L),M(),q.push("/apple_shop/products")})).catch((function(e){O.b.error(e.message,L)})),e.target.reset()},H=function(e){var t={productId:e};x.delete("/orders/delete",{data:t}).then((function(e){return console.log(e)})),x.delete("/products/".concat(e)).then((function(e){console.log(e.data),O.b.success("Products successfully deleted",L),M(),q.push("/apple_shop/products")})).catch((function(e){O.b.error(e.message,L)}))},Y=function(e,t){x.put("/users/".concat(d.userId),t).then((function(e){console.log(e.data),O.b.success("Password updated successfully!",L),q.push("/apple_shop/home")})).catch((function(e){var t=e.message.includes("401")?"Incorrect password. Try again.":e.message;O.b.error(t,L)})),e.target.reset()},Q=function(e){console.log(e),x.put(e).then((function(e){console.log(e.data),M(),O.b.success("Order updated successfully",L)})).catch((function(e){console.log(e),O.b.error(e.message,L)}))};return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(h.a,{color:"blue",progress:F,onLoaderFinished:function(){return D(0)}}),Object(r.jsx)(O.a,{}),y&&Object(r.jsx)(be,{logout:function(){g(""),w(!1),o([]),sessionStorage.clear(),O.b.dark("Logged out.",L),q.push("/apple_shop")},getOrders:B,getAdminOrders:E,user:d,mobile:N}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{exact:!0,path:"/apple_shop",render:function(e){return Object(r.jsx)(U,Object(i.a)(Object(i.a)({},e),{},{handleLogin:W}))}}),Object(r.jsx)(j.a,{path:"/apple_shop/home",component:Re}),Object(r.jsx)(j.a,{path:"/apple_shop/register",render:function(e){return Object(r.jsx)(T,Object(i.a)(Object(i.a)({},e),{},{handleRegister:$}))}}),Object(r.jsx)(j.a,{path:"/apple_shop/products",render:function(e){return Object(r.jsx)(ae,Object(i.a)(Object(i.a)({},e),{},{products:n,user:d,deleteProduct:H,updateProductAvailability:Q,updateProduct:Z,mobile:N}))}}),Object(r.jsx)(j.a,{path:"/apple_shop/orders",render:function(e){return Object(r.jsx)(Se,Object(i.a)(Object(i.a)({},e),{},{orders:k,mobile:N}))}}),Object(r.jsx)(j.a,{path:"/apple_shop/create-product",render:function(e){return Object(r.jsx)(Ce,Object(i.a)(Object(i.a)({},e),{},{addProduct:J}))}}),Object(r.jsx)(j.a,{path:"/apple_shop/password",render:function(e){return Object(r.jsx)(Ne,Object(i.a)(Object(i.a)({},e),{},{user:d,updatePassword:Y}))}})]})]})};n(92);c.a.render(Object(r.jsx)(s.a,{children:Object(r.jsx)(_e,{})}),document.querySelector("#root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.dde60361.chunk.js.map