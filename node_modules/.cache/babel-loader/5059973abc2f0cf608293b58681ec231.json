{"ast":null,"code":"import axios from 'axios';\nimport moment from 'moment';\nimport jwt_decode from \"jwt-decode\";\nconst shopApiInstance = axios.create({\n  baseURL: window.env.SHOP_REST_API_BASE_URL\n});\nconst tokenCheckInterceptor = axios.interceptors.response.use(response => {\n  console.log(response.headers['Shop-Refreshed-Access-Token']);\n  return response;\n}, error => {\n  return Promise.reject(error);\n});\n\nconst setBearerToken = token => {\n  shopApiInstance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  console.log(`Set bearer token, ${token}`);\n};\n\nconst isUserExpired = exp => {\n  if (exp * 1000 < Date.now()) {\n    console.warn('token expired');\n    tokenCheckInterceptor();\n  }\n};\n\nexport { shopApiInstance, setBearerToken, isUserExpired };","map":{"version":3,"sources":["/Users/kabash/Documents/shop-frontend/src/network.js"],"names":["axios","moment","jwt_decode","shopApiInstance","create","baseURL","window","env","SHOP_REST_API_BASE_URL","tokenCheckInterceptor","interceptors","response","use","console","log","headers","error","Promise","reject","setBearerToken","token","defaults","common","isUserExpired","exp","Date","now","warn"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,MAAMC,eAAe,GAAGH,KAAK,CAACI,MAAN,CAAa;AACjCC,EAAAA,OAAO,EAAEC,MAAM,CAACC,GAAP,CAAWC;AADa,CAAb,CAAxB;AAKA,MAAMC,qBAAqB,GAAGT,KAAK,CAACU,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAC1BD,QAAQ,IAAI;AACZE,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,OAAT,CAAiB,6BAAjB,CAAZ;AACA,SAAOJ,QAAP;AACD,CAJ2B,EAK5BK,KAAK,IAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAP2B,CAA9B;;AASA,MAAMG,cAAc,GAAGC,KAAK,IAAI;AAC5BjB,EAAAA,eAAe,CAACkB,QAAhB,CAAyBN,OAAzB,CAAiCO,MAAjC,CAAwC,eAAxC,IAA4D,UAASF,KAAM,EAA3E;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBM,KAAM,EAAvC;AACH,CAHD;;AAKA,MAAMG,aAAa,GAAGC,GAAG,IAAI;AACzB,MAAIA,GAAG,GAAG,IAAN,GAAaC,IAAI,CAACC,GAAL,EAAjB,EAA6B;AACzBb,IAAAA,OAAO,CAACc,IAAR,CAAa,eAAb;AACAlB,IAAAA,qBAAqB;AACxB;AACJ,CALD;;AAOA,SAAQN,eAAR,EAAyBgB,cAAzB,EAAyCI,aAAzC","sourcesContent":["import axios from 'axios';\nimport moment from 'moment';\nimport jwt_decode from \"jwt-decode\";\n\nconst shopApiInstance = axios.create({\n    baseURL: window.env.SHOP_REST_API_BASE_URL\n\n});\n\nconst tokenCheckInterceptor = axios.interceptors.response.use(\n    response => {\n    console.log(response.headers['Shop-Refreshed-Access-Token'])\n    return response;\n  }, \n  error => {\n    return Promise.reject(error);\n  });\n\nconst setBearerToken = token => {\n    shopApiInstance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    console.log(`Set bearer token, ${token}`);\n}\n\nconst isUserExpired = exp => {\n    if (exp * 1000 < Date.now()) {\n        console.warn('token expired')\n        tokenCheckInterceptor();\n    }\n}\n\nexport {shopApiInstance, setBearerToken, isUserExpired};"]},"metadata":{},"sourceType":"module"}